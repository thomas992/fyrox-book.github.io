<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Animation | Fyrox Book</title>
  <meta name="description" content="<p>A book for the Fyrox Game Engine
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Animation | Fyrox Book" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>A book for the Fyrox Game Engine
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Animation | Fyrox Book" />
  
  <meta name="twitter:description" content="<p>A book for the Fyrox Game Engine
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Dmitry Stepanov" />


<meta name="date" content="2024-06-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sound-system.html"/>
<link rel="next" href="blocks.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Fyrox Game Engine Book</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#engine-version"><i class="fa fa-check"></i><b>1.1</b> Engine Version</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#how-to-read-the-book"><i class="fa fa-check"></i><b>1.2</b> How to read the book</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#api-documentation"><i class="fa fa-check"></i><b>1.3</b> API Documentation</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#required-knowledge"><i class="fa fa-check"></i><b>1.4</b> Required knowledge</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#support-the-development"><i class="fa fa-check"></i><b>1.5</b> Support the development</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#introduction-to-fyrox"><i class="fa fa-check"></i><b>2.1</b> Introduction to Fyrox</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction.html"><a href="introduction.html#what-can-the-engine-do"><i class="fa fa-check"></i><b>2.1.1</b> What can the engine do?</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction.html"><a href="introduction.html#how-does-the-engine-work"><i class="fa fa-check"></i><b>2.1.2</b> How does the engine work?</a></li>
<li class="chapter" data-level="2.1.3" data-path="introduction.html"><a href="introduction.html#programming-languages"><i class="fa fa-check"></i><b>2.1.3</b> Programming languages</a></li>
<li class="chapter" data-level="2.1.4" data-path="introduction.html"><a href="introduction.html#engine-features"><i class="fa fa-check"></i><b>2.1.4</b> Engine Features</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#system-requirements"><i class="fa fa-check"></i><b>2.2</b> System Requirements</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction.html"><a href="introduction.html#supported-platforms"><i class="fa fa-check"></i><b>2.2.1</b> Supported Platforms</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#basic-concepts"><i class="fa fa-check"></i><b>2.3</b> Basic concepts</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#classic-oop"><i class="fa fa-check"></i><b>2.3.1</b> Classic OOP</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction.html"><a href="introduction.html#scenes"><i class="fa fa-check"></i><b>2.3.2</b> Scenes</a></li>
<li class="chapter" data-level="2.3.3" data-path="introduction.html"><a href="introduction.html#nodes-and-scene-graph"><i class="fa fa-check"></i><b>2.3.3</b> Nodes and Scene Graph</a></li>
<li class="chapter" data-level="2.3.4" data-path="introduction.html"><a href="introduction.html#plugins"><i class="fa fa-check"></i><b>2.3.4</b> Plugins</a></li>
<li class="chapter" data-level="2.3.5" data-path="introduction.html"><a href="introduction.html#scripts"><i class="fa fa-check"></i><b>2.3.5</b> Scripts</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#design-philosophy-and-goals"><i class="fa fa-check"></i><b>2.4</b> Design Philosophy and Goals</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#safety"><i class="fa fa-check"></i><b>2.4.1</b> Safety</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction.html"><a href="introduction.html#performance"><i class="fa fa-check"></i><b>2.4.2</b> Performance</a></li>
<li class="chapter" data-level="2.4.3" data-path="introduction.html"><a href="introduction.html#ease-of-use"><i class="fa fa-check"></i><b>2.4.3</b> Ease of use</a></li>
<li class="chapter" data-level="2.4.4" data-path="introduction.html"><a href="introduction.html#battle-tested"><i class="fa fa-check"></i><b>2.4.4</b> Battle-tested</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#frequently-asked-questions"><i class="fa fa-check"></i><b>2.5</b> Frequently Asked Questions</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction.html"><a href="introduction.html#which-graphics-api-does-the-engine-use"><i class="fa fa-check"></i><b>2.5.1</b> Which graphics API does the engine use?</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction.html"><a href="introduction.html#is-the-engine-based-on-ecs"><i class="fa fa-check"></i><b>2.5.2</b> Is the engine based on ECS?</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction.html"><a href="introduction.html#what-kinds-of-games-can-i-make-using-fyrox"><i class="fa fa-check"></i><b>2.5.3</b> What kinds of games can I make using Fyrox?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>3</b> Getting Started</a>
<ul>
<li class="chapter" data-level="3.1" data-path="getting-started.html"><a href="getting-started.html#editor-plugins-and-scripts"><i class="fa fa-check"></i><b>3.1</b> Editor, Plugins and Scripts</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="getting-started.html"><a href="getting-started.html#platform-specific-dependencies"><i class="fa fa-check"></i><b>3.1.1</b> Platform-specific Dependencies</a></li>
<li class="chapter" data-level="3.1.2" data-path="getting-started.html"><a href="getting-started.html#quick-start"><i class="fa fa-check"></i><b>3.1.2</b> Quick Start</a></li>
<li class="chapter" data-level="3.1.3" data-path="getting-started.html"><a href="getting-started.html#project-generator"><i class="fa fa-check"></i><b>3.1.3</b> Project Generator</a></li>
<li class="chapter" data-level="3.1.4" data-path="getting-started.html"><a href="getting-started.html#using-the-latest-engine-version"><i class="fa fa-check"></i><b>3.1.4</b> Using the Latest Engine Version</a></li>
<li class="chapter" data-level="3.1.5" data-path="getting-started.html"><a href="getting-started.html#adding-game-logic"><i class="fa fa-check"></i><b>3.1.5</b> Adding Game Logic</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="getting-started.html"><a href="getting-started.html#code-hot-reloading"><i class="fa fa-check"></i><b>3.2</b> Code Hot Reloading</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="getting-started.html"><a href="getting-started.html#how-to-use"><i class="fa fa-check"></i><b>3.2.1</b> How To Use</a></li>
<li class="chapter" data-level="3.2.2" data-path="getting-started.html"><a href="getting-started.html#build-profiles"><i class="fa fa-check"></i><b>3.2.2</b> Build Profiles</a></li>
<li class="chapter" data-level="3.2.3" data-path="getting-started.html"><a href="getting-started.html#stability"><i class="fa fa-check"></i><b>3.2.3</b> Stability</a></li>
<li class="chapter" data-level="3.2.4" data-path="getting-started.html"><a href="getting-started.html#technical-details-and-limitations"><i class="fa fa-check"></i><b>3.2.4</b> Technical Details and Limitations</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="getting-started.html"><a href="getting-started.html#fyroxed-overview"><i class="fa fa-check"></i><b>3.3</b> FyroxEd Overview</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="getting-started.html"><a href="getting-started.html#windows"><i class="fa fa-check"></i><b>3.3.1</b> Windows</a></li>
<li class="chapter" data-level="3.3.2" data-path="getting-started.html"><a href="getting-started.html#creating-or-loading-a-scene"><i class="fa fa-check"></i><b>3.3.2</b> Creating or loading a Scene</a></li>
<li class="chapter" data-level="3.3.3" data-path="getting-started.html"><a href="getting-started.html#populating-a-scene"><i class="fa fa-check"></i><b>3.3.3</b> Populating a Scene</a></li>
<li class="chapter" data-level="3.3.4" data-path="getting-started.html"><a href="getting-started.html#saving-a-scene"><i class="fa fa-check"></i><b>3.3.4</b> Saving a Scene</a></li>
<li class="chapter" data-level="3.3.5" data-path="getting-started.html"><a href="getting-started.html#undoing-and-redoing"><i class="fa fa-check"></i><b>3.3.5</b> Undoing and redoing</a></li>
<li class="chapter" data-level="3.3.6" data-path="getting-started.html"><a href="getting-started.html#controls"><i class="fa fa-check"></i><b>3.3.6</b> Controls</a></li>
<li class="chapter" data-level="3.3.7" data-path="getting-started.html"><a href="getting-started.html#play-mode"><i class="fa fa-check"></i><b>3.3.7</b> Play Mode</a></li>
<li class="chapter" data-level="3.3.8" data-path="getting-started.html"><a href="getting-started.html#additional-utilities"><i class="fa fa-check"></i><b>3.3.8</b> Additional Utilities</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="getting-started.html"><a href="getting-started.html#scene-and-scene-graph"><i class="fa fa-check"></i><b>3.4</b> Scene and Scene Graph</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="getting-started.html"><a href="getting-started.html#building-blocks-or-scene-nodes"><i class="fa fa-check"></i><b>3.4.1</b> Building Blocks or Scene Nodes</a></li>
<li class="chapter" data-level="3.4.2" data-path="getting-started.html"><a href="getting-started.html#local-and-global-coordinates"><i class="fa fa-check"></i><b>3.4.2</b> Local and Global Coordinates</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="getting-started.html"><a href="getting-started.html#assets"><i class="fa fa-check"></i><b>3.5</b> Assets</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="getting-started.html"><a href="getting-started.html#asset-types"><i class="fa fa-check"></i><b>3.5.1</b> Asset Types</a></li>
<li class="chapter" data-level="3.5.2" data-path="getting-started.html"><a href="getting-started.html#asset-management-1"><i class="fa fa-check"></i><b>3.5.2</b> Asset Management</a></li>
<li class="chapter" data-level="3.5.3" data-path="getting-started.html"><a href="getting-started.html#asset-instantiation"><i class="fa fa-check"></i><b>3.5.3</b> Asset Instantiation</a></li>
<li class="chapter" data-level="3.5.4" data-path="getting-started.html"><a href="getting-started.html#loading-assets"><i class="fa fa-check"></i><b>3.5.4</b> Loading Assets</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="getting-started.html"><a href="getting-started.html#data-management"><i class="fa fa-check"></i><b>3.6</b> Data Management</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="getting-started.html"><a href="getting-started.html#motivation"><i class="fa fa-check"></i><b>3.6.1</b> Motivation</a></li>
<li class="chapter" data-level="3.6.2" data-path="getting-started.html"><a href="getting-started.html#technical-details"><i class="fa fa-check"></i><b>3.6.2</b> Technical Details</a></li>
<li class="chapter" data-level="3.6.3" data-path="getting-started.html"><a href="getting-started.html#advantages"><i class="fa fa-check"></i><b>3.6.3</b> Advantages</a></li>
<li class="chapter" data-level="3.6.4" data-path="getting-started.html"><a href="getting-started.html#disadvantages"><i class="fa fa-check"></i><b>3.6.4</b> Disadvantages</a></li>
<li class="chapter" data-level="3.6.5" data-path="getting-started.html"><a href="getting-started.html#usage"><i class="fa fa-check"></i><b>3.6.5</b> Usage</a></li>
<li class="chapter" data-level="3.6.6" data-path="getting-started.html"><a href="getting-started.html#borrowing"><i class="fa fa-check"></i><b>3.6.6</b> Borrowing</a></li>
<li class="chapter" data-level="3.6.7" data-path="getting-started.html"><a href="getting-started.html#freeing"><i class="fa fa-check"></i><b>3.6.7</b> Freeing</a></li>
<li class="chapter" data-level="3.6.8" data-path="getting-started.html"><a href="getting-started.html#take-and-reserve"><i class="fa fa-check"></i><b>3.6.8</b> Take and Reserve</a></li>
<li class="chapter" data-level="3.6.9" data-path="getting-started.html"><a href="getting-started.html#iterators"><i class="fa fa-check"></i><b>3.6.9</b> Iterators</a></li>
<li class="chapter" data-level="3.6.10" data-path="getting-started.html"><a href="getting-started.html#direct-access"><i class="fa fa-check"></i><b>3.6.10</b> Direct Access</a></li>
<li class="chapter" data-level="3.6.11" data-path="getting-started.html"><a href="getting-started.html#validation"><i class="fa fa-check"></i><b>3.6.11</b> Validation</a></li>
<li class="chapter" data-level="3.6.12" data-path="getting-started.html"><a href="getting-started.html#type-erased-handles"><i class="fa fa-check"></i><b>3.6.12</b> Type-erased Handles</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="getting-started.html"><a href="getting-started.html#borrow-checker"><i class="fa fa-check"></i><b>3.7</b> Borrow Checker</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="getting-started.html"><a href="getting-started.html#multiple-borrowing"><i class="fa fa-check"></i><b>3.7.1</b> Multiple Borrowing</a></li>
<li class="chapter" data-level="3.7.2" data-path="getting-started.html"><a href="getting-started.html#message-passing"><i class="fa fa-check"></i><b>3.7.2</b> Message Passing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="scripting.html"><a href="scripting.html"><i class="fa fa-check"></i><b>4</b> Scripting</a>
<ul>
<li class="chapter" data-level="4.1" data-path="scripting.html"><a href="scripting.html#plugins-1"><i class="fa fa-check"></i><b>4.1</b> Plugins</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="scripting.html"><a href="scripting.html#structure"><i class="fa fa-check"></i><b>4.1.1</b> Structure</a></li>
<li class="chapter" data-level="4.1.2" data-path="scripting.html"><a href="scripting.html#plugin-context"><i class="fa fa-check"></i><b>4.1.2</b> Plugin Context</a></li>
<li class="chapter" data-level="4.1.3" data-path="scripting.html"><a href="scripting.html#control-flow"><i class="fa fa-check"></i><b>4.1.3</b> Control Flow</a></li>
<li class="chapter" data-level="4.1.4" data-path="scripting.html"><a href="scripting.html#editor-and-plugins"><i class="fa fa-check"></i><b>4.1.4</b> Editor and Plugins</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="scripting.html"><a href="scripting.html#executor"><i class="fa fa-check"></i><b>4.2</b> Executor</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="scripting.html"><a href="scripting.html#usage-1"><i class="fa fa-check"></i><b>4.2.1</b> Usage</a></li>
<li class="chapter" data-level="4.2.2" data-path="scripting.html"><a href="scripting.html#typical-use-cases"><i class="fa fa-check"></i><b>4.2.2</b> Typical Use Cases</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="scripting.html"><a href="scripting.html#scripts-1"><i class="fa fa-check"></i><b>4.3</b> Scripts</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="scripting.html"><a href="scripting.html#when-to-use-scripts-and-when-not"><i class="fa fa-check"></i><b>4.3.1</b> When to Use Scripts and When Not</a></li>
<li class="chapter" data-level="4.3.2" data-path="scripting.html"><a href="scripting.html#script-structure"><i class="fa fa-check"></i><b>4.3.2</b> Script Structure</a></li>
<li class="chapter" data-level="4.3.3" data-path="scripting.html"><a href="scripting.html#script-template-generator"><i class="fa fa-check"></i><b>4.3.3</b> Script Template Generator</a></li>
<li class="chapter" data-level="4.3.4" data-path="scripting.html"><a href="scripting.html#script-registration"><i class="fa fa-check"></i><b>4.3.4</b> Script Registration</a></li>
<li class="chapter" data-level="4.3.5" data-path="scripting.html"><a href="scripting.html#script-attachment"><i class="fa fa-check"></i><b>4.3.5</b> Script Attachment</a></li>
<li class="chapter" data-level="4.3.6" data-path="scripting.html"><a href="scripting.html#script-context"><i class="fa fa-check"></i><b>4.3.6</b> Script Context</a></li>
<li class="chapter" data-level="4.3.7" data-path="scripting.html"><a href="scripting.html#execution-order"><i class="fa fa-check"></i><b>4.3.7</b> Execution order</a></li>
<li class="chapter" data-level="4.3.8" data-path="scripting.html"><a href="scripting.html#message-passing-1"><i class="fa fa-check"></i><b>4.3.8</b> Message passing</a></li>
<li class="chapter" data-level="4.3.9" data-path="scripting.html"><a href="scripting.html#accessing-other-scripts-data"><i class="fa fa-check"></i><b>4.3.9</b> Accessing Other Script’s Data</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="scripting.html"><a href="scripting.html#tasks"><i class="fa fa-check"></i><b>4.4</b> Tasks</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="scripting.html"><a href="scripting.html#how-it-works"><i class="fa fa-check"></i><b>4.4.1</b> How it works</a></li>
<li class="chapter" data-level="4.4.2" data-path="scripting.html"><a href="scripting.html#examples"><i class="fa fa-check"></i><b>4.4.2</b> Examples</a></li>
<li class="chapter" data-level="4.4.3" data-path="scripting.html"><a href="scripting.html#performance-1"><i class="fa fa-check"></i><b>4.4.3</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="scene-1.html"><a href="scene-1.html"><i class="fa fa-check"></i><b>5</b> Scene</a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create"><i class="fa fa-check"></i><b>5.0.1</b> How to create</a></li>
<li class="chapter" data-level="5.0.2" data-path="scene-1.html"><a href="scene-1.html#where-all-my-scenes-located"><i class="fa fa-check"></i><b>5.0.2</b> Where all my scenes located?</a></li>
<li class="chapter" data-level="5.0.3" data-path="scene-1.html"><a href="scene-1.html#building-scene-asynchronously"><i class="fa fa-check"></i><b>5.0.3</b> Building scene asynchronously</a></li>
<li class="chapter" data-level="5.0.4" data-path="scene-1.html"><a href="scene-1.html#managing-multiple-scenes"><i class="fa fa-check"></i><b>5.0.4</b> Managing multiple scenes</a></li>
<li class="chapter" data-level="5.0.5" data-path="scene-1.html"><a href="scene-1.html#ambient-lighting"><i class="fa fa-check"></i><b>5.0.5</b> Ambient lighting</a></li>
<li class="chapter" data-level="5.1" data-path="scene-1.html"><a href="scene-1.html#graph"><i class="fa fa-check"></i><b>5.1</b> Graph</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-1"><i class="fa fa-check"></i><b>5.1.1</b> How to create</a></li>
<li class="chapter" data-level="5.1.2" data-path="scene-1.html"><a href="scene-1.html#adding-nodes"><i class="fa fa-check"></i><b>5.1.2</b> Adding nodes</a></li>
<li class="chapter" data-level="5.1.3" data-path="scene-1.html"><a href="scene-1.html#how-to-modify-the-hierarchy"><i class="fa fa-check"></i><b>5.1.3</b> How to modify the hierarchy</a></li>
<li class="chapter" data-level="5.1.4" data-path="scene-1.html"><a href="scene-1.html#how-to-remove-nodes"><i class="fa fa-check"></i><b>5.1.4</b> How to remove nodes</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="scene-1.html"><a href="scene-1.html#transformation"><i class="fa fa-check"></i><b>5.2</b> Transformation</a></li>
<li class="chapter" data-level="5.3" data-path="scene-1.html"><a href="scene-1.html#prefabs"><i class="fa fa-check"></i><b>5.3</b> Prefabs</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-and-use-a-prefab"><i class="fa fa-check"></i><b>5.3.1</b> How to create and use a prefab</a></li>
<li class="chapter" data-level="5.3.2" data-path="scene-1.html"><a href="scene-1.html#property-inheritance"><i class="fa fa-check"></i><b>5.3.2</b> Property inheritance</a></li>
<li class="chapter" data-level="5.3.3" data-path="scene-1.html"><a href="scene-1.html#hierarchical-prefabs"><i class="fa fa-check"></i><b>5.3.3</b> Hierarchical Prefabs</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="scene-1.html"><a href="scene-1.html#property-inheritance-1"><i class="fa fa-check"></i><b>5.4</b> Property Inheritance</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-inheritable-properties"><i class="fa fa-check"></i><b>5.4.1</b> How To Create Inheritable Properties</a></li>
<li class="chapter" data-level="5.4.2" data-path="scene-1.html"><a href="scene-1.html#which-fields-should-be-inheritable"><i class="fa fa-check"></i><b>5.4.2</b> Which Fields Should Be Inheritable?</a></li>
<li class="chapter" data-level="5.4.3" data-path="scene-1.html"><a href="scene-1.html#editor"><i class="fa fa-check"></i><b>5.4.3</b> Editor</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="scene-1.html"><a href="scene-1.html#base-node"><i class="fa fa-check"></i><b>5.5</b> Base node</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-2"><i class="fa fa-check"></i><b>5.5.1</b> How to create</a></li>
<li class="chapter" data-level="5.5.2" data-path="scene-1.html"><a href="scene-1.html#building-a-complex-hierarchy"><i class="fa fa-check"></i><b>5.5.2</b> Building a complex hierarchy</a></li>
<li class="chapter" data-level="5.5.3" data-path="scene-1.html"><a href="scene-1.html#transform"><i class="fa fa-check"></i><b>5.5.3</b> Transform</a></li>
<li class="chapter" data-level="5.5.4" data-path="scene-1.html"><a href="scene-1.html#visibility"><i class="fa fa-check"></i><b>5.5.4</b> Visibility</a></li>
<li class="chapter" data-level="5.5.5" data-path="scene-1.html"><a href="scene-1.html#enablingdisabling-scene-nodes"><i class="fa fa-check"></i><b>5.5.5</b> Enabling/disabling scene nodes</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="scene-1.html"><a href="scene-1.html#mesh-node"><i class="fa fa-check"></i><b>5.6</b> Mesh node</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="scene-1.html"><a href="scene-1.html#surfaces"><i class="fa fa-check"></i><b>5.6.1</b> Surfaces</a></li>
<li class="chapter" data-level="5.6.2" data-path="scene-1.html"><a href="scene-1.html#how-to-create-3"><i class="fa fa-check"></i><b>5.6.2</b> How to create</a></li>
<li class="chapter" data-level="5.6.3" data-path="scene-1.html"><a href="scene-1.html#animation-1"><i class="fa fa-check"></i><b>5.6.3</b> Animation</a></li>
<li class="chapter" data-level="5.6.4" data-path="scene-1.html"><a href="scene-1.html#data-buffers"><i class="fa fa-check"></i><b>5.6.4</b> Data Buffers</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="scene-1.html"><a href="scene-1.html#light-node"><i class="fa fa-check"></i><b>5.7</b> Light node</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="scene-1.html"><a href="scene-1.html#light-types"><i class="fa fa-check"></i><b>5.7.1</b> Light types</a></li>
<li class="chapter" data-level="5.7.2" data-path="scene-1.html"><a href="scene-1.html#light-scattering"><i class="fa fa-check"></i><b>5.7.2</b> Light scattering</a></li>
<li class="chapter" data-level="5.7.3" data-path="scene-1.html"><a href="scene-1.html#shadows"><i class="fa fa-check"></i><b>5.7.3</b> Shadows</a></li>
<li class="chapter" data-level="5.7.4" data-path="scene-1.html"><a href="scene-1.html#performance-2"><i class="fa fa-check"></i><b>5.7.4</b> Performance</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="scene-1.html"><a href="scene-1.html#sprite"><i class="fa fa-check"></i><b>5.8</b> Sprite</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-4"><i class="fa fa-check"></i><b>5.8.1</b> How to create</a></li>
<li class="chapter" data-level="5.8.2" data-path="scene-1.html"><a href="scene-1.html#animation-2"><i class="fa fa-check"></i><b>5.8.2</b> Animation</a></li>
<li class="chapter" data-level="5.8.3" data-path="scene-1.html"><a href="scene-1.html#general-rules"><i class="fa fa-check"></i><b>5.8.3</b> General rules</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="scene-1.html"><a href="scene-1.html#particle-system"><i class="fa fa-check"></i><b>5.9</b> Particle system</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="scene-1.html"><a href="scene-1.html#basic-concepts-1"><i class="fa fa-check"></i><b>5.9.1</b> Basic Concepts</a></li>
<li class="chapter" data-level="5.9.2" data-path="scene-1.html"><a href="scene-1.html#how-to-create-5"><i class="fa fa-check"></i><b>5.9.2</b> How to create</a></li>
<li class="chapter" data-level="5.9.3" data-path="scene-1.html"><a href="scene-1.html#soft-particles"><i class="fa fa-check"></i><b>5.9.3</b> Soft particles</a></li>
<li class="chapter" data-level="5.9.4" data-path="scene-1.html"><a href="scene-1.html#restarting-emission"><i class="fa fa-check"></i><b>5.9.4</b> Restarting emission</a></li>
<li class="chapter" data-level="5.9.5" data-path="scene-1.html"><a href="scene-1.html#enabling-or-disabling-particle-systems"><i class="fa fa-check"></i><b>5.9.5</b> Enabling or disabling particle systems</a></li>
<li class="chapter" data-level="5.9.6" data-path="scene-1.html"><a href="scene-1.html#performance-3"><i class="fa fa-check"></i><b>5.9.6</b> Performance</a></li>
<li class="chapter" data-level="5.9.7" data-path="scene-1.html"><a href="scene-1.html#limitations"><i class="fa fa-check"></i><b>5.9.7</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="scene-1.html"><a href="scene-1.html#terrain"><i class="fa fa-check"></i><b>5.10</b> Terrain</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="scene-1.html"><a href="scene-1.html#basic-concepts-2"><i class="fa fa-check"></i><b>5.10.1</b> Basic concepts</a></li>
<li class="chapter" data-level="5.10.2" data-path="scene-1.html"><a href="scene-1.html#creating-terrain-in-the-editor"><i class="fa fa-check"></i><b>5.10.2</b> Creating terrain in the editor</a></li>
<li class="chapter" data-level="5.10.3" data-path="scene-1.html"><a href="scene-1.html#creating-terrain-from-code"><i class="fa fa-check"></i><b>5.10.3</b> Creating terrain from code</a></li>
<li class="chapter" data-level="5.10.4" data-path="scene-1.html"><a href="scene-1.html#physics-1"><i class="fa fa-check"></i><b>5.10.4</b> Physics</a></li>
<li class="chapter" data-level="5.10.5" data-path="scene-1.html"><a href="scene-1.html#performance-4"><i class="fa fa-check"></i><b>5.10.5</b> Performance</a></li>
<li class="chapter" data-level="5.10.6" data-path="scene-1.html"><a href="scene-1.html#chunking"><i class="fa fa-check"></i><b>5.10.6</b> Chunking</a></li>
<li class="chapter" data-level="5.10.7" data-path="scene-1.html"><a href="scene-1.html#level-of-detail"><i class="fa fa-check"></i><b>5.10.7</b> Level-of-detail</a></li>
<li class="chapter" data-level="5.10.8" data-path="scene-1.html"><a href="scene-1.html#limitations-and-known-issues"><i class="fa fa-check"></i><b>5.10.8</b> Limitations and known issues</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="scene-1.html"><a href="scene-1.html#camera-node"><i class="fa fa-check"></i><b>5.11</b> Camera node</a>
<ul>
<li class="chapter" data-level="5.11.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-6"><i class="fa fa-check"></i><b>5.11.1</b> How to create</a></li>
<li class="chapter" data-level="5.11.2" data-path="scene-1.html"><a href="scene-1.html#projection-modes"><i class="fa fa-check"></i><b>5.11.2</b> Projection modes</a></li>
<li class="chapter" data-level="5.11.3" data-path="scene-1.html"><a href="scene-1.html#performance-5"><i class="fa fa-check"></i><b>5.11.3</b> Performance</a></li>
<li class="chapter" data-level="5.11.4" data-path="scene-1.html"><a href="scene-1.html#skybox"><i class="fa fa-check"></i><b>5.11.4</b> Skybox</a></li>
<li class="chapter" data-level="5.11.5" data-path="scene-1.html"><a href="scene-1.html#color-grading-look-up-tables"><i class="fa fa-check"></i><b>5.11.5</b> Color grading look-up tables</a></li>
<li class="chapter" data-level="5.11.6" data-path="scene-1.html"><a href="scene-1.html#picking"><i class="fa fa-check"></i><b>5.11.6</b> Picking</a></li>
</ul></li>
<li class="chapter" data-level="5.12" data-path="scene-1.html"><a href="scene-1.html#exposure-and-hdr"><i class="fa fa-check"></i><b>5.12</b> Exposure and HDR</a></li>
<li class="chapter" data-level="5.13" data-path="scene-1.html"><a href="scene-1.html#decal-node"><i class="fa fa-check"></i><b>5.13</b> Decal node</a>
<ul>
<li class="chapter" data-level="5.13.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-7"><i class="fa fa-check"></i><b>5.13.1</b> How to create</a></li>
<li class="chapter" data-level="5.13.2" data-path="scene-1.html"><a href="scene-1.html#textures"><i class="fa fa-check"></i><b>5.13.2</b> Textures</a></li>
<li class="chapter" data-level="5.13.3" data-path="scene-1.html"><a href="scene-1.html#rendering-1"><i class="fa fa-check"></i><b>5.13.3</b> Rendering</a></li>
<li class="chapter" data-level="5.13.4" data-path="scene-1.html"><a href="scene-1.html#bounds"><i class="fa fa-check"></i><b>5.13.4</b> Bounds</a></li>
<li class="chapter" data-level="5.13.5" data-path="scene-1.html"><a href="scene-1.html#layers-1"><i class="fa fa-check"></i><b>5.13.5</b> Layers</a></li>
<li class="chapter" data-level="5.13.6" data-path="scene-1.html"><a href="scene-1.html#performance-6"><i class="fa fa-check"></i><b>5.13.6</b> Performance</a></li>
</ul></li>
<li class="chapter" data-level="5.14" data-path="scene-1.html"><a href="scene-1.html#rectangle-node"><i class="fa fa-check"></i><b>5.14</b> Rectangle node</a>
<ul>
<li class="chapter" data-level="5.14.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-8"><i class="fa fa-check"></i><b>5.14.1</b> How to create</a></li>
<li class="chapter" data-level="5.14.2" data-path="scene-1.html"><a href="scene-1.html#specifying-image-portion-for-rendering"><i class="fa fa-check"></i><b>5.14.2</b> Specifying image portion for rendering</a></li>
<li class="chapter" data-level="5.14.3" data-path="scene-1.html"><a href="scene-1.html#animation-3"><i class="fa fa-check"></i><b>5.14.3</b> Animation</a></li>
<li class="chapter" data-level="5.14.4" data-path="scene-1.html"><a href="scene-1.html#performance-7"><i class="fa fa-check"></i><b>5.14.4</b> Performance</a></li>
</ul></li>
<li class="chapter" data-level="5.15" data-path="scene-1.html"><a href="scene-1.html#custom-scene-node"><i class="fa fa-check"></i><b>5.15</b> Custom Scene Node</a>
<ul>
<li class="chapter" data-level="5.15.1" data-path="scene-1.html"><a href="scene-1.html#limitations-1"><i class="fa fa-check"></i><b>5.15.1</b> Limitations</a></li>
<li class="chapter" data-level="5.15.2" data-path="scene-1.html"><a href="scene-1.html#editor-support"><i class="fa fa-check"></i><b>5.15.2</b> Editor support</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="physics-2.html"><a href="physics-2.html"><i class="fa fa-check"></i><b>6</b> Physics</a>
<ul>
<li class="chapter" data-level="6.0.1" data-path="physics-2.html"><a href="physics-2.html#differences-between-3d-and-2d"><i class="fa fa-check"></i><b>6.0.1</b> Differences between 3D and 2D</a></li>
<li class="chapter" data-level="6.1" data-path="physics-2.html"><a href="physics-2.html#rigid-body-node"><i class="fa fa-check"></i><b>6.1</b> Rigid body node</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="physics-2.html"><a href="physics-2.html#how-to-create-9"><i class="fa fa-check"></i><b>6.1.1</b> How to create</a></li>
<li class="chapter" data-level="6.1.2" data-path="physics-2.html"><a href="physics-2.html#colliders"><i class="fa fa-check"></i><b>6.1.2</b> Colliders</a></li>
<li class="chapter" data-level="6.1.3" data-path="physics-2.html"><a href="physics-2.html#force-and-torque"><i class="fa fa-check"></i><b>6.1.3</b> Force and torque</a></li>
<li class="chapter" data-level="6.1.4" data-path="physics-2.html"><a href="physics-2.html#kinematic-rigid-bodies"><i class="fa fa-check"></i><b>6.1.4</b> Kinematic rigid bodies</a></li>
<li class="chapter" data-level="6.1.5" data-path="physics-2.html"><a href="physics-2.html#continuous-collision-detection"><i class="fa fa-check"></i><b>6.1.5</b> Continuous collision detection</a></li>
<li class="chapter" data-level="6.1.6" data-path="physics-2.html"><a href="physics-2.html#dominance"><i class="fa fa-check"></i><b>6.1.6</b> Dominance</a></li>
<li class="chapter" data-level="6.1.7" data-path="physics-2.html"><a href="physics-2.html#d-rigid-bodies"><i class="fa fa-check"></i><b>6.1.7</b> 2D rigid bodies</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="physics-2.html"><a href="physics-2.html#collider-node"><i class="fa fa-check"></i><b>6.2</b> Collider node</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="physics-2.html"><a href="physics-2.html#shapes"><i class="fa fa-check"></i><b>6.2.1</b> Shapes</a></li>
<li class="chapter" data-level="6.2.2" data-path="physics-2.html"><a href="physics-2.html#how-to-create-10"><i class="fa fa-check"></i><b>6.2.2</b> How to create</a></li>
<li class="chapter" data-level="6.2.3" data-path="physics-2.html"><a href="physics-2.html#collision-filtering"><i class="fa fa-check"></i><b>6.2.3</b> Collision filtering</a></li>
<li class="chapter" data-level="6.2.4" data-path="physics-2.html"><a href="physics-2.html#using-colliders-for-hit-boxes"><i class="fa fa-check"></i><b>6.2.4</b> Using colliders for hit boxes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="physics-2.html"><a href="physics-2.html#joint"><i class="fa fa-check"></i><b>6.3</b> Joint</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="physics-2.html"><a href="physics-2.html#bodies-binding"><i class="fa fa-check"></i><b>6.3.1</b> Bodies Binding</a></li>
<li class="chapter" data-level="6.3.2" data-path="physics-2.html"><a href="physics-2.html#how-to-create-11"><i class="fa fa-check"></i><b>6.3.2</b> How to create</a></li>
<li class="chapter" data-level="6.3.3" data-path="physics-2.html"><a href="physics-2.html#limits"><i class="fa fa-check"></i><b>6.3.3</b> Limits</a></li>
<li class="chapter" data-level="6.3.4" data-path="physics-2.html"><a href="physics-2.html#usage-2"><i class="fa fa-check"></i><b>6.3.4</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="physics-2.html"><a href="physics-2.html#ray-casting"><i class="fa fa-check"></i><b>6.4</b> Ray Casting</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="physics-2.html"><a href="physics-2.html#avoiding-unnecessary-allocations"><i class="fa fa-check"></i><b>6.4.1</b> Avoiding unnecessary allocations</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="physics-2.html"><a href="physics-2.html#ragdoll"><i class="fa fa-check"></i><b>6.5</b> Ragdoll</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="physics-2.html"><a href="physics-2.html#how-to-create-12"><i class="fa fa-check"></i><b>6.5.1</b> How To Create</a></li>
<li class="chapter" data-level="6.5.2" data-path="physics-2.html"><a href="physics-2.html#video-tutorials"><i class="fa fa-check"></i><b>6.5.2</b> Video Tutorials</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sound-system.html"><a href="sound-system.html"><i class="fa fa-check"></i><b>7</b> Sound System</a>
<ul>
<li class="chapter" data-level="7.1" data-path="sound-system.html"><a href="sound-system.html#audio-bus"><i class="fa fa-check"></i><b>7.1</b> Audio Bus</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="sound-system.html"><a href="sound-system.html#graph-1"><i class="fa fa-check"></i><b>7.1.1</b> Graph</a></li>
<li class="chapter" data-level="7.1.2" data-path="sound-system.html"><a href="sound-system.html#effects"><i class="fa fa-check"></i><b>7.1.2</b> Effects</a></li>
<li class="chapter" data-level="7.1.3" data-path="sound-system.html"><a href="sound-system.html#editor-1"><i class="fa fa-check"></i><b>7.1.3</b> Editor</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="sound-system.html"><a href="sound-system.html#sound-1"><i class="fa fa-check"></i><b>7.2</b> Sound</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="sound-system.html"><a href="sound-system.html#how-to-create-13"><i class="fa fa-check"></i><b>7.2.1</b> How to create</a></li>
<li class="chapter" data-level="7.2.2" data-path="sound-system.html"><a href="sound-system.html#d-and-3d"><i class="fa fa-check"></i><b>7.2.2</b> 2D and 3D</a></li>
<li class="chapter" data-level="7.2.3" data-path="sound-system.html"><a href="sound-system.html#audio-bus-1"><i class="fa fa-check"></i><b>7.2.3</b> Audio bus</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="sound-system.html"><a href="sound-system.html#head-related-transfer-function"><i class="fa fa-check"></i><b>7.3</b> Head Related Transfer Function</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="sound-system.html"><a href="sound-system.html#hrtf-on-practice"><i class="fa fa-check"></i><b>7.3.1</b> HRTF on practice</a></li>
<li class="chapter" data-level="7.3.2" data-path="sound-system.html"><a href="sound-system.html#performance-8"><i class="fa fa-check"></i><b>7.3.2</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="animation-4.html"><a href="animation-4.html"><i class="fa fa-check"></i><b>8</b> Animation</a>
<ul>
<li class="chapter" data-level="8.0.1" data-path="animation-4.html"><a href="animation-4.html#web-demo"><i class="fa fa-check"></i><b>8.0.1</b> Web Demo</a></li>
<li class="chapter" data-level="8.0.2" data-path="animation-4.html"><a href="animation-4.html#track-binding"><i class="fa fa-check"></i><b>8.0.2</b> Track binding</a></li>
<li class="chapter" data-level="8.0.3" data-path="animation-4.html"><a href="animation-4.html#time-slice-and-looping"><i class="fa fa-check"></i><b>8.0.3</b> Time slice and looping</a></li>
<li class="chapter" data-level="8.0.4" data-path="animation-4.html"><a href="animation-4.html#speed"><i class="fa fa-check"></i><b>8.0.4</b> Speed</a></li>
<li class="chapter" data-level="8.0.5" data-path="animation-4.html"><a href="animation-4.html#enabling-or-disabling-animations"><i class="fa fa-check"></i><b>8.0.5</b> Enabling or disabling animations</a></li>
<li class="chapter" data-level="8.0.6" data-path="animation-4.html"><a href="animation-4.html#signals"><i class="fa fa-check"></i><b>8.0.6</b> Signals</a></li>
<li class="chapter" data-level="8.0.7" data-path="animation-4.html"><a href="animation-4.html#creating-from-code"><i class="fa fa-check"></i><b>8.0.7</b> Creating From Code</a></li>
<li class="chapter" data-level="8.0.8" data-path="animation-4.html"><a href="animation-4.html#importing"><i class="fa fa-check"></i><b>8.0.8</b> Importing</a></li>
<li class="chapter" data-level="8.0.9" data-path="animation-4.html"><a href="animation-4.html#playing-an-animation"><i class="fa fa-check"></i><b>8.0.9</b> Playing an Animation</a></li>
<li class="chapter" data-level="8.1" data-path="animation-4.html"><a href="animation-4.html#animation-editor"><i class="fa fa-check"></i><b>8.1</b> Animation Editor</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="animation-4.html"><a href="animation-4.html#typical-workflow"><i class="fa fa-check"></i><b>8.1.1</b> Typical Workflow</a></li>
<li class="chapter" data-level="8.1.2" data-path="animation-4.html"><a href="animation-4.html#toolbar"><i class="fa fa-check"></i><b>8.1.2</b> Toolbar</a></li>
<li class="chapter" data-level="8.1.3" data-path="animation-4.html"><a href="animation-4.html#track-list"><i class="fa fa-check"></i><b>8.1.3</b> Track List</a></li>
<li class="chapter" data-level="8.1.4" data-path="animation-4.html"><a href="animation-4.html#curve-editor"><i class="fa fa-check"></i><b>8.1.4</b> Curve Editor</a></li>
<li class="chapter" data-level="8.1.5" data-path="animation-4.html"><a href="animation-4.html#property-binding"><i class="fa fa-check"></i><b>8.1.5</b> Property Binding</a></li>
<li class="chapter" data-level="8.1.6" data-path="animation-4.html"><a href="animation-4.html#animation-importing"><i class="fa fa-check"></i><b>8.1.6</b> Animation Importing</a></li>
<li class="chapter" data-level="8.1.7" data-path="animation-4.html"><a href="animation-4.html#preview-mode"><i class="fa fa-check"></i><b>8.1.7</b> Preview Mode</a></li>
<li class="chapter" data-level="8.1.8" data-path="animation-4.html"><a href="animation-4.html#root-motion"><i class="fa fa-check"></i><b>8.1.8</b> Root Motion</a></li>
<li class="chapter" data-level="8.1.9" data-path="animation-4.html"><a href="animation-4.html#limitations-2"><i class="fa fa-check"></i><b>8.1.9</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="animation-4.html"><a href="animation-4.html#animation-blending"><i class="fa fa-check"></i><b>8.2</b> Animation Blending</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="animation-4.html"><a href="animation-4.html#how-to-create-14"><i class="fa fa-check"></i><b>8.2.1</b> How to create</a></li>
<li class="chapter" data-level="8.2.2" data-path="animation-4.html"><a href="animation-4.html#from-editor-2"><i class="fa fa-check"></i><b>8.2.2</b> From editor</a></li>
<li class="chapter" data-level="8.2.3" data-path="animation-4.html"><a href="animation-4.html#from-code-2"><i class="fa fa-check"></i><b>8.2.3</b> From code</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="animation-4.html"><a href="animation-4.html#animation-blending-state-machine-absm-editor"><i class="fa fa-check"></i><b>8.3</b> Animation Blending State Machine (ABSM) Editor</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="animation-4.html"><a href="animation-4.html#toolbar-1"><i class="fa fa-check"></i><b>8.3.1</b> Toolbar</a></li>
<li class="chapter" data-level="8.3.2" data-path="animation-4.html"><a href="animation-4.html#parameters"><i class="fa fa-check"></i><b>8.3.2</b> Parameters</a></li>
<li class="chapter" data-level="8.3.3" data-path="animation-4.html"><a href="animation-4.html#state-graph"><i class="fa fa-check"></i><b>8.3.3</b> State Graph</a></li>
<li class="chapter" data-level="8.3.4" data-path="animation-4.html"><a href="animation-4.html#state-viewer"><i class="fa fa-check"></i><b>8.3.4</b> State Viewer</a></li>
<li class="chapter" data-level="8.3.5" data-path="animation-4.html"><a href="animation-4.html#layer-mask"><i class="fa fa-check"></i><b>8.3.5</b> Layer Mask</a></li>
<li class="chapter" data-level="8.3.6" data-path="animation-4.html"><a href="animation-4.html#preview-mode-1"><i class="fa fa-check"></i><b>8.3.6</b> Preview Mode</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="animation-4.html"><a href="animation-4.html#signals-1"><i class="fa fa-check"></i><b>8.4</b> Signals</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="animation-4.html"><a href="animation-4.html#how-to-add"><i class="fa fa-check"></i><b>8.4.1</b> How to add</a></li>
<li class="chapter" data-level="8.4.2" data-path="animation-4.html"><a href="animation-4.html#reacting-to-signal-events"><i class="fa fa-check"></i><b>8.4.2</b> Reacting to signal events</a></li>
<li class="chapter" data-level="8.4.3" data-path="animation-4.html"><a href="animation-4.html#events-from-absm"><i class="fa fa-check"></i><b>8.4.3</b> Events from ABSM</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="animation-4.html"><a href="animation-4.html#root-motion-1"><i class="fa fa-check"></i><b>8.5</b> Root Motion</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="animation-4.html"><a href="animation-4.html#how-to-enable"><i class="fa fa-check"></i><b>8.5.1</b> How to enable</a></li>
<li class="chapter" data-level="8.5.2" data-path="animation-4.html"><a href="animation-4.html#how-to-use-1"><i class="fa fa-check"></i><b>8.5.2</b> How to use</a></li>
<li class="chapter" data-level="8.5.3" data-path="animation-4.html"><a href="animation-4.html#combining-root-motion-with-procedural-motion"><i class="fa fa-check"></i><b>8.5.3</b> Combining root motion with procedural motion</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="animation-4.html"><a href="animation-4.html#sprite-animation"><i class="fa fa-check"></i><b>8.6</b> Sprite Animation</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="animation-4.html"><a href="animation-4.html#how-to-use-2"><i class="fa fa-check"></i><b>8.6.1</b> How to use</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="blocks.html"><a href="blocks.html"><i class="fa fa-check"></i><b>9</b> Blocks</a>
<ul>
<li class="chapter" data-level="9.1" data-path="blocks.html"><a href="blocks.html#equations"><i class="fa fa-check"></i><b>9.1</b> Equations</a></li>
<li class="chapter" data-level="9.2" data-path="blocks.html"><a href="blocks.html#theorems-and-proofs"><i class="fa fa-check"></i><b>9.2</b> Theorems and proofs</a></li>
<li class="chapter" data-level="9.3" data-path="blocks.html"><a href="blocks.html#callout-blocks"><i class="fa fa-check"></i><b>9.3</b> Callout blocks</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="sharing-your-book.html"><a href="sharing-your-book.html"><i class="fa fa-check"></i><b>10</b> Sharing your book</a>
<ul>
<li class="chapter" data-level="10.1" data-path="sharing-your-book.html"><a href="sharing-your-book.html#publishing"><i class="fa fa-check"></i><b>10.1</b> Publishing</a></li>
<li class="chapter" data-level="10.2" data-path="sharing-your-book.html"><a href="sharing-your-book.html#pages"><i class="fa fa-check"></i><b>10.2</b> 404 pages</a></li>
<li class="chapter" data-level="10.3" data-path="sharing-your-book.html"><a href="sharing-your-book.html#metadata-for-sharing"><i class="fa fa-check"></i><b>10.3</b> Metadata for sharing</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Fyrox Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="animation-4" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapter 8</span> Animation<a href="animation-4.html#animation-4" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Animation allows you to change properties of scene nodes at runtime using a set of key frames. Animation consists of multiple tracks, where each track is bound to a property of a scene node. A track can animate any numeric properties, starting from numbers (including <code>bool</code>) end ending by 2/3/4 dimensional vectors. Each component (number, x/y/z/w vector components) is stored in a <em>parametric curve</em>. Every parametric curve contains zero or more <em>key frames</em>. Graphically this could be represented like so:</p>
<pre class="text"><code>                                         Timeline
                                            v
  Time   &gt; |---------------|------------------------------------&gt;
           |               |
  Track1 &gt; | node.position |                                     
           |   X curve     |..1..........5...........10..........
           |   Y curve     |..2.........-2..................1....  &lt; Curve key frames
           |   Z curve     |..1..........9......................4
           |_______________|  
  Track2   | node.property |                                  
           | ............  |.....................................
           | ............  |.....................................
           | ............  |.....................................</code></pre>
<p>Each key frame is just a real number with interpolation mode. Interpolation mode tells the engine how to calculate intermediate values between key frames. There are three kinds of interpolation used in animations (you can skip “boring math” if you want):</p>
<ul>
<li><strong>Constant</strong> - intermediate value will be calculated using leftmost value of two. Constant “interpolation” is usually used to create step-like behaviour, the most common case is to “interpolate” two boolean values.</li>
<li><strong>Linear</strong> - intermediate value will be calculated using linear interpolation <code>i = left + (right - left) / t</code>, where <code>t = (time_position - left) / (right - left)</code>. <code>t</code> is always in <code>0..1</code> range. Linear interpolation is usually used to create “straight” transitions between two values.</li>
<li><strong>Cubic</strong> - intermediate value will be calculated using Hermite cubic spline: <code>i = (2t^3 - 3t^2 + 1) * left + (t^3 - 2t^2 + t) * left_tangent + (-2t^3 + 3t^2) * right + (t^3 - t^2) * right_tangent</code>, where <code>t = (time_position - left) / (right - left)</code> (<code>t</code> is always in <code>0..1</code> range), <code>left_tangent</code> and <code>right_tangent</code> is usually a <code>tan(angle)</code>. Cubic interpolation is usually used to create “smooth” transitions between two values.</li>
</ul>
<div id="web-demo" class="section level3 hasAnchor" number="8.0.1">
<h3><span class="header-section-number">8.0.1</span> Web Demo<a href="animation-4.html#web-demo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can explore animation system capabilities in this <a href="https://fyrox.rs/assets/demo/animation/index.html">web demo</a>. Keep in mind, that it was designed to run on PC and wasn’t tested on mobile devices.</p>
</div>
<div id="track-binding" class="section level3 hasAnchor" number="8.0.2">
<h3><span class="header-section-number">8.0.2</span> Track binding<a href="animation-4.html#track-binding" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Each track is always bound to a property in a node, either by its name or by a special binding. The name is used to fetch the property using reflection, the special binding is a faster way of fetching built-in properties. It is usually used to animate position, scale and rotation (these are the most common properties available in every scene node).</p>
</div>
<div id="time-slice-and-looping" class="section level3 hasAnchor" number="8.0.3">
<h3><span class="header-section-number">8.0.3</span> Time slice and looping<a href="animation-4.html#time-slice-and-looping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While key frames on the curves can be located at arbitrary position in time, animations usually plays a specific time slice. By default, each animation will play on a given time slice infinitely - it is called <em>animation looping</em>, it works in both playback directions.</p>
</div>
<div id="speed" class="section level3 hasAnchor" number="8.0.4">
<h3><span class="header-section-number">8.0.4</span> Speed<a href="animation-4.html#speed" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can vary playback speed in wide range, by default every animation has playback speed multiplier set to 1.0. The multiplier tells how faster (&gt;1) or slower (&lt;1) the animation needs to be played. Negative speed multiplier values will reverse playback.</p>
</div>
<div id="enabling-or-disabling-animations" class="section level3 hasAnchor" number="8.0.5">
<h3><span class="header-section-number">8.0.5</span> Enabling or disabling animations<a href="animation-4.html#enabling-or-disabling-animations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes there’s a need to disable/enable an animation or check if it is enabled or not, you can do this by using the pair of respective methods - <code>Animation::set_enabled</code> and <code>Animation::is_enabled</code>.</p>
</div>
<div id="signals" class="section level3 hasAnchor" number="8.0.6">
<h3><span class="header-section-number">8.0.6</span> Signals<a href="animation-4.html#signals" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Signal is a named marker on specific time position on the animation timeline. Signal will emit an event if the animation playback time passes signal’s position from left-to-right (or vice versa depending on playback direction). Signals are usually used to attach some specific actions to a position in time. For example, you can have a walking animation and you want to emit sounds when character’s feet touch ground. In this case you need to add a few signals at times when each foot touches the ground. After that all you need to do is to fetch animation events one-by-one and emit respective sounds. See respective <a href="signal.md">chapter</a> for more info.</p>
</div>
<div id="creating-from-code" class="section level3 hasAnchor" number="8.0.7">
<h3><span class="header-section-number">8.0.7</span> Creating From Code<a href="animation-4.html#creating-from-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Usually, animations are created from the editor or some external tool and then imported in the engine. Before trying the example below, please read the docs for <code>AnimationPlayer</code> node, it is much more convenient way of animating other nodes. The node can be created from the editor, and you don’t even need to write any code. Use the following example code as a guide <strong>only</strong> if you need to create procedural animations:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/animation/mod.rs:create_animation}}</code></pre>
<p>The code above creates a simple animation that moves a node along X axis in various ways. The usage of the animation is only for the sake of completeness of the example. In the real games you need to add the animation to an animation player scene node, and it will do the job for you.</p>
</div>
<div id="importing" class="section level3 hasAnchor" number="8.0.8">
<h3><span class="header-section-number">8.0.8</span> Importing<a href="animation-4.html#importing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It is also possible to import an animation from external source (such as FBX files). You can do this in two major ways: from code or from the editor. The following sections shows how to use both ways.</p>
<div id="from-editor-1" class="section level4 hasAnchor" number="8.0.8.1">
<h4><span class="header-section-number">8.0.8.1</span> From Editor<a href="animation-4.html#from-editor-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>At first, make sure that you have your 3D model instantiated in the scene. The following example has <code>agent.fbx</code> instance in the scene (to do that, just drag’n’drop your 3D model in the scene from the Asset Browser). To import an animation you need to create an <code>Animation Player</code> scene node, open the <a href="anim_editor.md">Animation Editor</a> and click the button with arrow-down icon:</p>
<div class="float">
<img src="images/animation/import_animation_1.png" alt="Step 1" />
<div class="figcaption">Step 1</div>
</div>
<p>Now you need to pick the root node of your 3D model to which you’ll import your animation. Usually it will be called the same as your 3D model (<code>agent.fbx</code> on the screenshot below):</p>
<div class="float">
<img src="images/animation/import_animation_2.png" alt="Step 2" />
<div class="figcaption">Step 2</div>
</div>
<p>The last thing you need to do is to pick the animation you want to import:</p>
<div class="float">
<img src="images/animation/import_animation_3.png" alt="Step 3" />
<div class="figcaption">Step 3</div>
</div>
<p>If everything is correct, you can preview your animation by clicking <code>Preview</code> checkbox:</p>
<div class="float">
<img src="import_animation_4.png" alt="Step 4" />
<div class="figcaption">Step 4</div>
</div>
</div>
<div id="from-code-1" class="section level4 hasAnchor" number="8.0.8.2">
<h4><span class="header-section-number">8.0.8.2</span> From Code<a href="animation-4.html#from-code-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You can do the same as in the previous section, but from code:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/animation/mod.rs:create_animated_character}}</code></pre>
<p>As you can see, at first this code creates an instance of a 3D model. Then it loads an animation and creates its instance in the animation player. Please note, that this code uses <code>async</code>, which produces a future which should be driven by some executor. You can use <code>block_on</code> method to execute it at call site (this won’t work on WebAssembly).</p>
<p>It is advised to prefer the editor to code approach, because it hides all this tedious code and properly handles asynchronous loading on all platforms.</p>
</div>
</div>
<div id="playing-an-animation" class="section level3 hasAnchor" number="8.0.9">
<h3><span class="header-section-number">8.0.9</span> Playing an Animation<a href="animation-4.html#playing-an-animation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Animations will be played automatically if the respective animation player is has the property <code>Auto Apply</code> set to <code>true</code>. Since the animation player can contain multiple animations, all of them will be played at once. You can enable/disable animations when needed by finding them by name from code and switching <code>Enabled</code> property:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/animation/mod.rs:enable_animation}}</code></pre>
<p>This code could also be used to change animation properties at runtime. To do that, replace <code>set_enabled</code> with some other methods, such as <code>set_speed</code>, <code>set_loop</code>, <code>set_root_motion_settings</code> etc.</p>
</div>
<div id="animation-editor" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Animation Editor<a href="animation-4.html#animation-editor" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="float">
<img src="images/animation/anim_editor.png" alt="anim editor" />
<div class="figcaption">anim editor</div>
</div>
<p>Animation Editor is a tool that helps you to create and preview animations. This is a powerful tool that can be used to animate pretty much any numeric property. It has three main parts:</p>
<ol style="list-style-type: decimal">
<li><code>Toolbar</code> - contains a set of tools that changes a particular part of an animation (name, length, speed, etc.)</li>
<li><code>Track List</code> - contains a list of tracks of nodes that will be animated.</li>
<li><code>Curve Editor</code> - curve editor allows you to edit behaviour of a numeric parameter over the time.</li>
</ol>
<p>The editor can be opened in two ways - using <code>Utils -&gt; Animation Editor</code> or by selecting an animation player node and clicking <code>Open Animation Editor</code> button in the inspector.</p>
<div class="float">
<img src="images/animation/ae_open1.png" alt="open1" />
<div class="figcaption">open1</div>
</div>
<div class="float">
<img src="images/animation/ae_open2.png" alt="open2" />
<div class="figcaption">open2</div>
</div>
<p>In both ways you still need to select an animation player for editing.</p>
<div id="typical-workflow" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Typical Workflow<a href="animation-4.html#typical-workflow" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>At first, you need to create or <a href="animation-4.html#animation-importing">import</a> an animation, then you need to set its time slice to desired range (see <a href="animation-4.html#toolbar">Time Slice</a> in the section below), then you need to add a few tracks for desired properties and finally add some keys. You can <a href="animation-4.html#preview-mode">preview</a> the results at any time, keep in mind that any attempt to change an animation while it is the preview mode, will revert every change from the preview mode and only then apply your change.</p>
</div>
<div id="toolbar" class="section level3 hasAnchor" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Toolbar<a href="animation-4.html#toolbar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The toolbar contains a set of tools that changes a particular part of an animation (name, length, speed, etc.). It looks like this:</p>
<div class="float">
<img src="images/animation/ae_toolbar.png" alt="toolbar" />
<div class="figcaption">toolbar</div>
</div>
<ol style="list-style-type: decimal">
<li><code>Animation Name</code> - name of a currently selected animation.</li>
<li><code>Add Animation</code> - adds a new empty animation with the name from the text box at the left to the animation player.</li>
<li><code>Import Animation</code> - starts animation importing process. See <a href="animation-4.html#animation-importing">Animation Importing</a> section for more info.</li>
<li><code>Reimport Animation</code> - re-imports the animation from an external file, it is useful if you need to change animation’s content, while keep references to it valid.</li>
<li><code>Rename Animation</code> - renames a currently selected animation using the name from the text box at the left.</li>
<li><code>Animation Selector</code> - allows you to switch currently edited animation.</li>
<li><code>Delete Animation</code> - deletes a currently selected animation, tries to select last animation from the list if possible.</li>
<li><code>Duplicate Animation</code> - clones a currently selected animation.</li>
<li><code>Loop Animation</code> - enables or disables looping of a currently selected animation.</li>
<li><code>Enable Animation</code> - enables or disables a currently selected animation.</li>
<li><code>Animation Speed</code> - sets a new playback speed of a currently selected animation.</li>
<li><code>Time Slice</code> - a time range (in seconds) which defines start and end time of a currently selected animation. The range is highlighted in the curve editor.</li>
<li><code>Root Motion</code> - open root motion settings. See <a href="animation-4.html#root-motion">Root Motion</a> section for more info.</li>
<li><code>Preview Switch</code> - enables or disables animation preview. See <a href="animation-4.html#preview-mode"><code>Preview Mode</code></a> section for more info.</li>
<li><code>Play/Pause</code> - plays or pauses a currently selected animation (allowed only in the preview mode).</li>
<li><code>Stop</code> - stops a currently selected animation (allowed only in the preview mode).</li>
</ol>
</div>
<div id="track-list" class="section level3 hasAnchor" number="8.1.3">
<h3><span class="header-section-number">8.1.3</span> Track List<a href="animation-4.html#track-list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The track list contains a list of tracks of nodes that will be animated. It looks like this:</p>
<div class="float">
<img src="images/animation/ae_track_list.png" alt="track list" />
<div class="figcaption">track list</div>
</div>
<ol style="list-style-type: decimal">
<li><code>Filter Bar</code> - filters the track list by finding tracks whose names matching the filter. You can use this to find tracks that belong to a particular scene node.</li>
<li><code>Clear Filter</code> - clears the filter, the track list will show all the tracks after this.</li>
<li><code>Collapse All</code> - collapses all the tracks in the list.</li>
<li><code>Expand All</code> - expands all the tracks in the list.</li>
<li><code>Track</code> - a track with some number of children parametric curves.</li>
<li><code>Track Component Curve</code> - parametric curve that serves a data source for the animation for a particular track.</li>
<li><code>Track Switch</code> - enables or disables a track; disabled tracks won’t “touch” their properties.</li>
<li><code>Add Track</code> - starts property binding process, see <a href="animation-4.html#property-binding">Property Binding</a> section for more info.</li>
</ol>
<div id="track-context-menu" class="section level4 hasAnchor" number="8.1.3.1">
<h4><span class="header-section-number">8.1.3.1</span> Track Context Menu<a href="animation-4.html#track-context-menu" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="float">
<img src="images/animation/ae_track_context_menu.png" alt="context menu" />
<div class="figcaption">context menu</div>
</div>
<ul>
<li><code>Remove Selected Tracks</code> - removes selected tracks; you can remove multiple tracks at a time by selecting them while holding <code>Ctrl</code>.</li>
</ul>
</div>
</div>
<div id="curve-editor" class="section level3 hasAnchor" number="8.1.4">
<h3><span class="header-section-number">8.1.4</span> Curve Editor<a href="animation-4.html#curve-editor" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Curve editor allows you to edit parametric curves (one at a time). A curve consists of zero or more key frames with various transition rules between current and the next. The editor looks like this:</p>
<div class="float">
<img src="images/animation/ae_curve_editor.png" alt="curve editor" />
<div class="figcaption">curve editor</div>
</div>
<ol style="list-style-type: decimal">
<li><code>Time Ruler</code> - shows time values and every signal of a currently selected animation. A click on the time ruler will move the playback cursor at the click position. You can move it by clicking at the cursor and moving the mouse while holding the left mouse button. Animation signals can be moved in the same fashion.</li>
<li><code>Parametric Curve</code> - a curve that defines how a value changes over time.</li>
<li><code>Time Thumb</code> - animation playback cursor, useful only for preview.</li>
<li><code>Animation Signal</code> - some animation signal that will produce animation events when the playback cursor passes it.</li>
</ol>
<div id="time-ruler-context-menu" class="section level4 hasAnchor" number="8.1.4.1">
<h4><span class="header-section-number">8.1.4.1</span> Time Ruler Context Menu<a href="animation-4.html#time-ruler-context-menu" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="float">
<img src="images/animation/ae_time_ruler_context_menu.png" alt="time ruler context menu" />
<div class="figcaption">time ruler context menu</div>
</div>
<ul>
<li><code>Remove Signal</code> - removes an animation signal under the mouse cursor.</li>
<li><code>Add Signal</code> - adds a new animation signal at the mouse cursor position.</li>
</ul>
</div>
<div id="key-frame-context-menu" class="section level4 hasAnchor" number="8.1.4.2">
<h4><span class="header-section-number">8.1.4.2</span> Key Frame Context Menu<a href="animation-4.html#key-frame-context-menu" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="float">
<img src="images/animation/ae_key_frame_context_menu.png" alt="key frame context menu" />
<div class="figcaption">key frame context menu</div>
</div>
<ul>
<li><code>Location</code> - shows a key location and allows you to change it. Useful for setting precise values.</li>
<li><code>Value</code> - shows a key value and allows you to change it. Useful for setting precise values.</li>
<li><code>Add Key</code> - adds a new key to the curve.</li>
<li><code>Remove</code> - removes all selected keys. You can select multiple keys either by box selection (click and drag the mouse to active box selection) or by clicking on separate keys while holding <code>Ctrl</code>.</li>
<li><code>Key...</code> - allows you to change the interpolation type of key. It could be one of the following values: Constant, Linear, Cubic.</li>
<li><code>Zoom To Fit</code> - tries to find zooming values (for both axes) and the view position with which the entire curve fits in the viewport.</li>
</ul>
</div>
</div>
<div id="property-binding" class="section level3 hasAnchor" number="8.1.5">
<h3><span class="header-section-number">8.1.5</span> Property Binding<a href="animation-4.html#property-binding" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To animate a property all you need to do is to click on <code>Add Track...</code> button at the bottom of the track list, select a node to animate and then select a property that will be animated. There are two windows that will be shown one after another:</p>
<div class="float">
<img src="images/animation/ae_add_track_select_node.png" alt="step1" />
<div class="figcaption">step1</div>
</div>
<div class="float">
<img src="images/animation/ae_add_track_select_property.png" alt="step2" />
<div class="figcaption">step2</div>
</div>
<p>You can cancel property binding at any time by clicking <code>Cancel</code> in any of the windows. Keep in mind that you can animate only numeric properties, so not every property is shown in the window.</p>
</div>
<div id="animation-importing" class="section level3 hasAnchor" number="8.1.6">
<h3><span class="header-section-number">8.1.6</span> Animation Importing<a href="animation-4.html#animation-importing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Animations can be stored in separate files, but the engine requires all of them to be in a single Animation Player. To put an animation from an external resource (an FBX, for instance) in the animation player you can use animation importing. To do that, click on animation import icon and then select a root node of the hierarchy that is animated in the external animation file, then select the animation file and click <code>Ok</code>. The engine will try to import the animation and map it to the given hierarchy, mapping is done using node names, so animated node names must match in both your scene and your external animation file.</p>
<div class="float">
<img src="images/animation/ae_import_select_target_node.png" alt="step1" />
<div class="figcaption">step1</div>
</div>
<div class="float">
<img src="images/animation/ae_import_select_animation.png" alt="step2" />
<div class="figcaption">step2</div>
</div>
<p>Content of existing animations can be replaced by reimporting. Click on a button with two circular arrows to reimport your animation. It could be useful if you changed your animation in some external editor (Blender for example) and want to apply changes in your game.</p>
</div>
<div id="preview-mode" class="section level3 hasAnchor" number="8.1.7">
<h3><span class="header-section-number">8.1.7</span> Preview Mode<a href="animation-4.html#preview-mode" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Preview mode helps you to see and debug your animation. After activating the mode, you need to play the animation by clicking the <code>Play/Pause</code> button:</p>
<div class="float">
<img src="images/animation/anim_editor.gif" alt="anim editor" />
<div class="figcaption">anim editor</div>
</div>
<p>Any significant change made in the scene will automatically deactivate the preview mode reverting all the changes made by playing animation.</p>
</div>
<div id="root-motion" class="section level3 hasAnchor" number="8.1.8">
<h3><span class="header-section-number">8.1.8</span> Root Motion<a href="animation-4.html#root-motion" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See <a href="root_motion/root_motion.md">Root Motion chapter</a> for more info.</p>
</div>
<div id="limitations-2" class="section level3 hasAnchor" number="8.1.9">
<h3><span class="header-section-number">8.1.9</span> Limitations<a href="animation-4.html#limitations-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For now there’s no dopesheet mode in the editor, you can edit only one numeric parameter at a time. Also, there’s no capture mode - this is a special mode in which the editor automatically adds your changes in the scene to the animation. These limitations will be removed in the future versions.</p>
</div>
</div>
<div id="animation-blending" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Animation Blending<a href="animation-4.html#animation-blending" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Animation blending is a powerful feature that allows you to mix multiple animations into one. Each animation is mixed with a various weights which in sum gives 1.0 (100%). By having opposite coefficients (k1 = 0 -&gt; 1, k2 = 1 -&gt; 0) changing in time it is possible to create transition effect.</p>
<p>Handling transitions with all the coefficients is a routine job, the engine can handle it for you giving you some nice
features:</p>
<ul>
<li>Multiple states with smooth transitions between them</li>
<li>Ability to blend multiple animations in one and use it as pose source for blending</li>
<li>Ability to specify a set of variables that will be used as blending coefficients and transition rules.</li>
</ul>
<p>All these features consolidated in so-called animation blending state machine (ABSM). Machine is used to blend multiple animation as well as perform automatic “smooth” transition between states. In general, ABSM could be represented like this:</p>
<div class="float">
<img src="absm_structure.png" alt="ABSM Structure" />
<div class="figcaption">ABSM Structure</div>
</div>
<p>At the first look it may seem very complicated, but in reality it uses quite simple techniques. Let’s start from the left side of the picture and go to the right. Yellow rectangle at the left depicts an animation player node that contains a bunch of animations, that will be used for blending. Two center blocks (layer 0 and layer 1) depicts separate layers (ABSM could have any number of layers in it). Each layer can contain an arbitrary nodes (green shapes), states (blue shapes), transitions (thick yellow arrows).</p>
<p>Nodes serves as a source of poses, that can be blended in any desired way. States are the part of the inner state machine, only one state could be active at the same time. Transitions are used to specify state transition rules.</p>
<p>At the “exit” of each layer there’s a layer filter, it is responsible for filtering out values for specific scene nodes and could be used to prevent some scene nodes from being animated by a certain layer. Please note that despite the look of it, layer filter not necessarily be applied after all animations and states are blended - it could be done at any moment and drawn like so only for simplicity reasons.</p>
<p>The last, but not the least, important thing on the picture is the parameters container on the right side of the picture. Parameter either a transition rule, blending weight, or sampling point. If you look closely at the transitions or animation blending nodes you’ll see small text marks. This is the names of the respective parameters.</p>
<p>In general, any state machine works like this - ABSM nodes are used to blend or fetch animations and their resulting poses are used by ABSM states. Active state provides final pose, which is then passes filtering and returned to you. After the last stage, you can apply the pose to a scene graph to make the resulting animation to have effect.</p>
<div id="how-to-create-14" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> How to create<a href="animation-4.html#how-to-create-14" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As always, there are two major ways of creating things in Fyrox - from the editor or from code. Take your pick.</p>
</div>
<div id="from-editor-2" class="section level3 hasAnchor" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> From editor<a href="animation-4.html#from-editor-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use <a href="absm_editor.md">ABSM Editor</a> for to create animation blending state machines.</p>
</div>
<div id="from-code-2" class="section level3 hasAnchor" number="8.2.3">
<h3><span class="header-section-number">8.2.3</span> From code<a href="animation-4.html#from-code-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can always create an ABSM from code, a simple ABSM could be created like this:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/animation/blending.rs:create_absm}}</code></pre>
<p>Here we have Walk, Idle and Run states which use different sources of poses:
- Walk - is the most complicated here - it uses result of blending between <code>Aim</code> and <code>Walk</code> animations with different weights. This is useful if your character can only walk or can walk <em>and</em> aim at the same time. Desired pose determined by Walk Weight and Aim Weight parameters combination.
- Run and idle both directly use animation as pose source.</p>
<p>There are four transitions between three states each with its own rule. Rule is just a boolean parameter that indicates that transition should be activated. Let’s look at the code example of the above state graph:</p>
<p>As you can see, everything is quite straightforward. Even such simple state machine requires quite a lot of code, which can be removed by using ABSM editor. Read the next chapter to learn about it.</p>
</div>
</div>
<div id="animation-blending-state-machine-absm-editor" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Animation Blending State Machine (ABSM) Editor<a href="animation-4.html#animation-blending-state-machine-absm-editor" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>While it is possible to create and manage animation blending and state manually from code, it quickly becomes too annoying and hardly manageable. To help you create and manage blending machines in easy way, the engine offers an ABSM Editor tool. This chapter is an overview of the editor, it is quite complex, but the guide should help you to figure out which part is made for what. Next chapter will help you to create your first animation blending state machine.</p>
<div class="float">
<img src="images/animation/absm.png" alt="absm editor" />
<div class="figcaption">absm editor</div>
</div>
<p>The editor has four main parts (panels):</p>
<ol style="list-style-type: decimal">
<li><code>Toolbar</code> - contains a set of tools to edit animation layers and enable/disable preview mode. See <a href="animation-4.html#toolbar">Toolbar</a> section for more info.</li>
<li><code>Parameters</code> - allows you to edit various variables that are responsible for transitions, weight parameters for blending, etc. See <a href="./absm_parameters.png">Parameters</a> section for more info.</li>
<li><code>State Graph</code> - allows you to create, delete, edit states and transition between them. See <a href="animation-4.html#state-graph">State Graph</a> section for more info.</li>
<li><code>State Viewer</code> - allows you to edit pose source for a state. Pose source can be represented either by a single node that plays an animation, or a series of play animation nodes connected to blending nodes (which can be connected to other blending nodes, etc.). See <a href="animation-4.html#state-viewer">State Viewer</a> section for more info.</li>
</ol>
<p>The editor can be opened in two ways - using <code>Utils -&gt; ABSM Editor</code> or by selecting an animation blending state machine node and clicking <code>Open ABSM Editor...</code> button:</p>
<div class="float">
<img src="images/animation/absm_open1.png" alt="open1" />
<div class="figcaption">open1</div>
</div>
<div class="float">
<img src="images/animation/absm_open2.png" alt="open1" />
<div class="figcaption">open1</div>
</div>
<p>In both ways you still need to select an an animation blending state machine node for editing.</p>
<div id="toolbar-1" class="section level3 hasAnchor" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Toolbar<a href="animation-4.html#toolbar-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="float">
<img src="images/animation/absm_toolbar.png" alt="toolbar" />
<div class="figcaption">toolbar</div>
</div>
<ol style="list-style-type: decimal">
<li><code>Preview Switch</code> - enables or disables preview mode for the ABSM. See <a href="animation-4.html#preview-mode">Preview Mode</a> section for more info.</li>
<li><code>Layer Name</code> - name of the selected layer. Type a new name here to rename currently selected layer (hit enter or just click elsewhere to rename).</li>
<li><code>Add Layer</code> - adds a new layer with the name in the <code>Layer Name</code> text box to the ABSM. ABSM can have multiple layers with the same name, but it strongly advised to set unique names here.</li>
<li><code>Remove Current Layer</code> - removes currently selected layer. You can delete all layers, but in this case your ABSM won’t have any effect.</li>
<li><code>Layer Selector</code> - allows you to select a layer for editing, default selection is none.</li>
<li><code>Layer Mask</code> - opens a <code>Layer Mask Editor</code> and helps you to edit the layer mask of the current layer. See
<a href="animation-4.html#layer-mask">Layer Mask</a> section for more info.</li>
</ol>
</div>
<div id="parameters" class="section level3 hasAnchor" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Parameters<a href="animation-4.html#parameters" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Parameter is a named and typed variable that provides the animation system with some data required for it to work. There are only three type of parameters:</p>
<ul>
<li><code>Rule</code> - boolean value that used as a trigger for transitions. When transition is using some rule, it checks the value of the parameter and if it is <code>true</code> transition starts.</li>
<li><code>Weight</code> - real number (<code>f32</code>) that is used a weight when you’re blending multiple animations into one.</li>
<li><code>Index</code> - natural number (<code>i32</code>) that is used as an animation selector.</li>
</ul>
<div class="float">
<img src="images/animation/absm_parameters.png" alt="parameters" />
<div class="figcaption">parameters</div>
</div>
<ol style="list-style-type: decimal">
<li><code>Add Parameters</code> - adds a new parameter to the parameters’ container.</li>
<li><code>Remove a Parameter</code> - removes selected parameter from the parameters’ container.</li>
<li><code>Parameter Name</code> - allows you to set a parameter name.</li>
<li><code>Parameter Type</code> - allows you to select the type of the parameter.</li>
<li><code>Parameter Value</code> - allows you to set parameter value.</li>
</ol>
</div>
<div id="state-graph" class="section level3 hasAnchor" number="8.3.3">
<h3><span class="header-section-number">8.3.3</span> State Graph<a href="animation-4.html#state-graph" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>State Graph allows you to create states and transitions between them.</p>
<div class="float">
<img src="images/animation/absm_state_graph.png" alt="state graph" />
<div class="figcaption">state graph</div>
</div>
<ol style="list-style-type: decimal">
<li><code>State</code> - state is final animation for a set of scene nodes, only one state can be active at a time.</li>
<li><code>Transition</code> - is an <em>ordered</em> connection between two states, it defines how much time it needed to perform blending of two states.</li>
<li><code>Root State</code> - is an entry state of the current layer.</li>
</ol>
<div id="state-context-menu" class="section level4 hasAnchor" number="8.3.3.1">
<h4><span class="header-section-number">8.3.3.1</span> State Context Menu<a href="animation-4.html#state-context-menu" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="float">
<img src="images/animation/absm_state_context_menu.png" alt="state context menu" />
<div class="figcaption">state context menu</div>
</div>
<ul>
<li><code>Create Transition</code> - starts transition creation from the current state to some other.</li>
<li><code>Remove</code> - removes the state.</li>
<li><code>Set As Entry State</code> - marks the state as an entry state (this state will be active at beginning).</li>
</ul>
</div>
<div id="transition-context-menu" class="section level4 hasAnchor" number="8.3.3.2">
<h4><span class="header-section-number">8.3.3.2</span> Transition Context Menu<a href="animation-4.html#transition-context-menu" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="float">
<img src="images/animation/absm_transition_context_menu.png" alt="transition context menu" />
<div class="figcaption">transition context menu</div>
</div>
<ul>
<li><code>Remove Transition</code> - removes selected transition.</li>
</ul>
</div>
<div id="state-properties" class="section level4 hasAnchor" number="8.3.3.3">
<h4><span class="header-section-number">8.3.3.3</span> State Properties<a href="animation-4.html#state-properties" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Select a <code>State</code> node to edit the following properties:</p>
<div class="float">
<img src="images/animation/absm_state_properties.png" alt="state properties" />
<div class="figcaption">state properties</div>
</div>
<ul>
<li><code>Position</code> - is a location of the state on the canvas.</li>
<li><code>Name</code> - name of the state.</li>
<li><code>Root</code> - handle of the backing animation node inside the state.</li>
</ul>
</div>
<div id="transition-properties" class="section level4 hasAnchor" number="8.3.3.4">
<h4><span class="header-section-number">8.3.3.4</span> Transition Properties<a href="animation-4.html#transition-properties" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Select a <code>Transition</code> node to edit the following properties:</p>
<div class="float">
<img src="images/animation/absm_transition_properties.png" alt="transition properties" />
<div class="figcaption">transition properties</div>
</div>
<ul>
<li><code>Name</code> - name of the state.</li>
<li><code>Transition Time</code> - amount of time for blending between two states (in seconds).</li>
<li><code>Elapsed Time</code> - starting amount of blending time.</li>
<li><code>Source</code> - handle of a source state.</li>
<li><code>Desc</code> - handle of a destination state.</li>
<li><code>Rule</code> - a name of <code>Rule</code> type parameter that defines whether the transition can be activated or not.</li>
<li><code>Invert Rule</code> - defines whether to invert the value of <code>Rule</code> or not.</li>
<li><code>Blend Factor</code> - defines a percentage (in <code>0..1</code> range) of how much transition was active.</li>
</ul>
</div>
</div>
<div id="state-viewer" class="section level3 hasAnchor" number="8.3.4">
<h3><span class="header-section-number">8.3.4</span> State Viewer<a href="animation-4.html#state-viewer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>State Viewer allows you to edit contents of states. You can create animation blending chains of any complexity, the simplest content of a state is just a single <code>Play Animation</code> node. Currently, the engine supports just three animation blending nodes:</p>
<ul>
<li><code>Play Animation</code> - takes animation pose directly from specified animation, does nothing to it.</li>
<li><code>Blend Animations</code> - takes multiple animation poses from respective animations and blends them together with respective blend weights.</li>
<li><code>Blend Animations By Index</code> - takes multiple animation poses from respective animations and switches between them with “smooth” transition using an index parameter.</li>
</ul>
<div class="float">
<img src="images/animation/absm_state_viewer.png" alt="state viewer" />
<div class="figcaption">state viewer</div>
</div>
<ol style="list-style-type: decimal">
<li><code>Node</code> - is a source of animation for blending.</li>
<li><code>Connection</code> - defines how nodes are connected to each other. To create a new connection, click on a small dot on a node, hold the button and start dragging to a dot on some other node.</li>
<li><code>Root Node</code> - root node is marked green; root node is a final source of animation for the parent state.</li>
</ol>
<div id="play-animation-properties" class="section level4 hasAnchor" number="8.3.4.1">
<h4><span class="header-section-number">8.3.4.1</span> <code>Play Animation</code> Properties<a href="animation-4.html#play-animation-properties" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Select a <code>Play Animation</code> node to edit the following properties:</p>
<div class="float">
<img src="images/animation/absm_play_animation_properties.png" alt="play animation properties" />
<div class="figcaption">play animation properties</div>
</div>
<ul>
<li><code>Position</code> - is a location of the node on the canvas.</li>
<li><code>Animation</code> - an animation to fetch the pose from.</li>
</ul>
</div>
<div id="blend-animations-properties" class="section level4 hasAnchor" number="8.3.4.2">
<h4><span class="header-section-number">8.3.4.2</span> <code>Blend Animations</code> Properties<a href="animation-4.html#blend-animations-properties" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Select a <code>Blend Animations</code> node to edit the following properties:</p>
<div class="float">
<img src="images/animation/absm_blend_animations_properties.png" alt="blend animations properties" />
<div class="figcaption">blend animations properties</div>
</div>
<ul>
<li><code>Position</code> - is a location of the node on the canvas.</li>
<li><code>Pose Sources</code> - a set of input poses. To add a pose either click on <code>+</code> or <code>+Input</code> on the node itself. Don’t forget to connect some nodes to the new input poses.
<ul>
<li><code>Weight</code> - a weight of the pose; could be either a constant value or some parameter.</li>
</ul></li>
</ul>
</div>
<div id="blend-animations-by-index-properties" class="section level4 hasAnchor" number="8.3.4.3">
<h4><span class="header-section-number">8.3.4.3</span> <code>Blend Animations By Index</code> Properties<a href="animation-4.html#blend-animations-by-index-properties" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Select a <code>Blend Animations By Index</code> node to edit the following properties:</p>
<div class="float">
<img src="images/animation/absm_blend_animations_by_index_properties.png" alt="blend animations by index properties" />
<div class="figcaption">blend animations by index properties</div>
</div>
<ul>
<li><code>Position</code> - is a location of the node on the canvas.</li>
<li><code>Index Parameter</code> - a name of an indexing parameter (must be <code>Index</code> type).</li>
<li><code>Inputs</code> - a set of input poses. To add a pose either click on <code>+</code> or <code>+Input</code> on the node itself. Don’t forget to
connect some nodes to the new input poses.
<ul>
<li><code>Blend Time</code> - defines how much time is needed to transition to the pose.</li>
</ul></li>
</ul>
</div>
<div id="connection-context-menu" class="section level4 hasAnchor" number="8.3.4.4">
<h4><span class="header-section-number">8.3.4.4</span> Connection Context Menu<a href="animation-4.html#connection-context-menu" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Every connection has a context menu that can be shown by a right-click on a connection.</p>
<div class="float">
<img src="images/animation/absm_connection_context_menu.png" alt="connection context menu" />
<div class="figcaption">connection context menu</div>
</div>
<ul>
<li><code>Remove Connection</code> - removes the connection between parent nodes.</li>
</ul>
</div>
<div id="node-context-menu" class="section level4 hasAnchor" number="8.3.4.5">
<h4><span class="header-section-number">8.3.4.5</span> Node Context Menu<a href="animation-4.html#node-context-menu" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Every node has a context menu that can be shown by a right-click on a connection.</p>
<div class="float">
<img src="images/animation/absm_node_context_menu.png" alt="node context menu" />
<div class="figcaption">node context menu</div>
</div>
<ul>
<li><code>Set As Root</code> - sets the node as the final pose source of the parent state.</li>
<li><code>Remove</code> - removes the node from the state.</li>
</ul>
</div>
</div>
<div id="layer-mask" class="section level3 hasAnchor" number="8.3.5">
<h3><span class="header-section-number">8.3.5</span> Layer Mask<a href="animation-4.html#layer-mask" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="float">
<img src="images/animation/absm_layer_mask.png" alt="layer mask" />
<div class="figcaption">layer mask</div>
</div>
<p>Layer mask editor allows you to select which nodes <strong>won’t</strong> be animated by the current animation layer. Selected nodes are marked with dark color. To select multiple nodes at once, hold <code>Ctrl</code> and click on items. The text box at the top of the window allows you to search for a particular scene node. To save edited layer mask click <code>OK</code>.</p>
</div>
<div id="preview-mode-1" class="section level3 hasAnchor" number="8.3.6">
<h3><span class="header-section-number">8.3.6</span> Preview Mode<a href="animation-4.html#preview-mode-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Preview mode turns on the animation blending state machine and its animation player and allows you to see the result of the work of the machine. Any significant changes in the scene automatically disables the preview mode and any changes done by the machine is discarded. While the preview mode is active, you can freely change the values of the parameters to see how the machine will react to this. This helps you to debug your state machine, it is especially useful for complex state machines with lots of layers. Here’s how the preview mode works:</p>
<div class="float">
<img src="images/animation/absm.gif" alt="absm" />
<div class="figcaption">absm</div>
</div>
</div>
</div>
<div id="signals-1" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Signals<a href="animation-4.html#signals-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In some cases you may need to perform an action when at certain time of your animation. It could be a footstep sound, when foot touches ground, grenade tossing, etc. This could be done via animation signals. Animation signal is just a named marker that has time position at an animation timeline. It will be emitted when animation playback time passes it (left-to-right or right-to-left depending on the actual speed of your animation). All you need to do, is to catch these signals in your game code and do the desired actions.</p>
<div id="how-to-add" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> How to add<a href="animation-4.html#how-to-add" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As usual, there are two possible ways of adding animation signals - from the animation editor and from code.</p>
<div id="from-animation-editor" class="section level4 hasAnchor" number="8.4.1.1">
<h4><span class="header-section-number">8.4.1.1</span> From animation editor<a href="animation-4.html#from-animation-editor" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To add a signal to some animation, select an animation player, open the animation editor, select some animation in it. Now all you need to do is to right-click on the timeline and press <code>Add Signal</code>.</p>
<div class="float">
<img src="images/animation/signal_add.png" alt="Add Signal" />
<div class="figcaption">Add Signal</div>
</div>
<p>After the signal is added, you can select it and edit its properties in the inspector. Also, you can drag it on the timeline to adjust its position.</p>
<div class="float">
<img src="images/animation/signal_edit.png" alt="Edit Signal" />
<div class="figcaption">Edit Signal</div>
</div>
<p>Set a meaningful name to the signal, and it is pretty much done - all you need to do next is to write signal handling code in your game. See <a href="animation-4.html#reacting-to-signal-events">the next section</a> to learn how to do it.</p>
</div>
<div id="from-code-3" class="section level4 hasAnchor" number="8.4.1.2">
<h4><span class="header-section-number">8.4.1.2</span> From code<a href="animation-4.html#from-code-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A signal could also be added from code, this requires knowing a handle of your animation player and a name/handle of your animation. Please note the comment about signal’s uuid in the code below.</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/animation/signal.rs:add_signal}}</code></pre>
</div>
</div>
<div id="reacting-to-signal-events" class="section level3 hasAnchor" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> Reacting to signal events<a href="animation-4.html#reacting-to-signal-events" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When you have your signals ready for use, all you need to do is to react to the signals somehow. This is very simple: just borrow your animation from the animation player and pop animation event one-by-one from internal queue:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/animation/signal.rs:react_to_signal_events}}</code></pre>
<p>You can do pretty much anything when reacting to signals. For example, this could be a prefab instantiation to create smoke effect under the feet, playing a footstep sound, etc.</p>
</div>
<div id="events-from-absm" class="section level3 hasAnchor" number="8.4.3">
<h3><span class="header-section-number">8.4.3</span> Events from ABSM<a href="animation-4.html#events-from-absm" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Animation blending state machines are able to collect events from the currently playing animations using different strategies. This ability prevents you from tedious manual animation events collection from a bunch of animations manually.</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/animation/signal.rs:collect_events_from_absm}}</code></pre>
<p>This function collects all animation events from all active animations in the specified ABSM (in its first layer). The arguments to it are the following:</p>
<ul>
<li><code>absm</code> - a handle to an animation blending state machine node.</li>
<li><code>strategy</code> - event collection strategy, which includes all events collection, max and min weight. The last two may be used if you’re getting a lot of events and want to get events from the animations with max or min weights respectively.</li>
<li><code>ctx</code> - current script context, available in pretty much any script methods.</li>
</ul>
</div>
</div>
<div id="root-motion-1" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Root Motion<a href="animation-4.html#root-motion-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Root motion is a special technique that transfers motion from some node in a hierarchy to a physical capsule, which is then used to perform the actual motion. In action it looks like this:</p>
<iframe width="750" height="410" src="https://youtube.com/embed/0lG8Spzk128" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p>As you can see in the first part of the video, the movement of the character looks more like floating above the ground. This happens because the actual movement of the physical capsule is not synchronized with the movement of the character. Root motion fixes exactly this issue by taking the motion of some root node of the animated hierarchy (hips in case of this character) and transferring it to the physical capsule. This makes the actual movement to be fully synchronized with the movement “baked” in the animation.</p>
<p>Root motion also have some nice effect - you can move your character solely by the movement from animation, and it will work perfectly in 99% of cases. Animations can also contain some rotations which can also be extracted and applied to the physical capsule. The next awesome property is that your character will never stand out of its physical capsule, which will prevent phasing it into walls when playing animations with large movements.</p>
<p>In general, you should prefer root motion -driven movement for your characters whenever you can. Simply because it eliminates a lot of common problems with character movement. It can also be applied to 2D world and will work exactly the same.</p>
<div id="how-to-enable" class="section level3 hasAnchor" number="8.5.1">
<h3><span class="header-section-number">8.5.1</span> How to enable<a href="animation-4.html#how-to-enable" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can enable/disable/setup it in the drop-down menu that opens by clicking <code>RM</code> button in the animation editor. Keep in mind, that root motion should be configured on <em>per animation</em> basis. Most of the animations does not need the root motion at all.</p>
<div class="float">
<img src="images/animation/ae_rm.png" alt="root motion" />
<div class="figcaption">root motion</div>
</div>
<p>The most important part here is the <code>Root</code> handle, it should be set to a root node that moves by your animation, usually it is called like “hips” or similar:</p>
<div class="float">
<img src="images/animation/ae_root_node.png" alt="root node" />
<div class="figcaption">root node</div>
</div>
<p>After that, you need to apply filters for axes - most of the locomotion animations “works” in oXZ plane, so Y axis should be ignored. Also, if you don’t have any turns in your animation, you can also filter out the rotation part.</p>
<p>Alternatively, you can do the same from code:</p>
<pre class="rust,no_run"><code>{{#include ../../code/snippets/src/animation/root_motion.rs:setup_root_motion}}</code></pre>
<p>This code does pretty much the same as the editor on the screenshots above. The arguments of this function are the following:</p>
<ul>
<li><code>animation_player</code> - a handle to the animation player in which all your animations are stored,</li>
<li><code>animation</code> - a handle of the animation in which you want to enable the root motion (you can obtain the handle by using <a href="https://docs.rs/fyrox/latest/fyrox/animation/struct.AnimationContainer.html#method.find_by_name_ref">AnimationContainer::find_by_name_ref</a> method).</li>
<li><code>root_node</code> - a handle to a root node of your character’s hierarchy, usually it is called something like “Hips” or “Pelvis”.</li>
<li><code>ctx</code> - script context from your current script.</li>
</ul>
</div>
<div id="how-to-use-1" class="section level3 hasAnchor" number="8.5.2">
<h3><span class="header-section-number">8.5.2</span> How to use<a href="animation-4.html#how-to-use-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Direct root motion values extracted from animations are kind of useless by their own and in 99% of the cases you should get the average root motion values from a <a href="../blending.md">state machine</a> that animates your character. This is because animation blending state machine properly blends the root motion from all active animation sources. In general, it could look something like this:</p>
<pre class="rust,no_run"><code>{{#include ../../code/snippets/src/animation/root_motion.rs:fetch_and_apply_root_motion}}</code></pre>
<p>This code extracts the current <strong>local-space offset</strong> for the current frame and then transforms the offset to world-space coordinates. Finally, it reduces the offset by the current delta time (<code>1.0 / ctx.dt</code>) to obtain the new velocity vector which is then applied to the rigid body (player’s capsule).</p>
<p>The arguments in this function are following:</p>
<ul>
<li><code>absm</code> a handle to an instance of Animation Blending State Machine node</li>
<li><code>rigid_body</code> a handle to the rigid body that is used by your character</li>
<li><code>model</code> - a handle to the root node of your character’s 3D model.</li>
</ul>
<div id="raw-root-motion-values" class="section level4 hasAnchor" number="8.5.2.1">
<h4><span class="header-section-number">8.5.2.1</span> Raw root motion values<a href="animation-4.html#raw-root-motion-values" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If for some reason you still need raw root motion values from animations, then you can extract them directly from the desired animation by using <a href="https://docs.rs/fyrox/latest/fyrox/animation/struct.Animation.html#method.root_motion">Animation::root_motion</a> method.</p>
</div>
</div>
<div id="combining-root-motion-with-procedural-motion" class="section level3 hasAnchor" number="8.5.3">
<h3><span class="header-section-number">8.5.3</span> Combining root motion with procedural motion<a href="animation-4.html#combining-root-motion-with-procedural-motion" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes there’s a need to combine root motion with some procedural motion (for example - inertia after jumping). This could be done pretty easily by adding two velocity vectors - one from the root motion, and one from the procedural motion.</p>
</div>
</div>
<div id="sprite-animation" class="section level2 hasAnchor" number="8.6">
<h2><span class="header-section-number">8.6</span> Sprite Animation<a href="animation-4.html#sprite-animation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sprites can be animated using a series of pre-made images. For performance reasons they’re usually packed into a rectangular texture, where each individual image located in its own cell of a grid. Such texture is called a sprite sheet, and it looks something like this:</p>
<div class="float">
<img src="images/animation/sprite_sheet_example.png" alt="sprite sheet example" />
<div class="figcaption">sprite sheet example</div>
</div>
<p>As you can see, there are multiple frames for each animation (idle, run, sword swing, etc.) packed into a single image. To play an animation, all we need to do is to change frames with some desired frequency and… that’s pretty much all. That’s the simplest animation technique one could imagine.</p>
<p>Sprite sheets usually made by artists, not programmers, so just search online for some sprite sheet or order a new one from an artist. Programmer’s art is pretty much always bad.</p>
<div id="how-to-use-2" class="section level3 hasAnchor" number="8.6.1">
<h3><span class="header-section-number">8.6.1</span> How to use<a href="animation-4.html#how-to-use-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="float">
<img src="sprite_animation_editor.png" alt="sprite animation editor" />
<div class="figcaption">sprite animation editor</div>
</div>
<p>Fyrox offers a built-in sprite animation system which has its own editor. To be able to use sprite animation all you need to do is to add a <code>SpriteSheetAnimation</code> field (or a bunch of them) to your script and put the following code in its <code>on_update</code>:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb105-1"><a href="animation-4.html#cb105-1" tabindex="-1"></a><span class="op">{{</span>#include <span class="op">../../</span>code<span class="op">/</span>snippets<span class="op">/</span>src<span class="op">/</span>animation<span class="op">/</span><span class="kw">mod</span><span class="op">.</span>rs<span class="op">:</span>animation<span class="op">}}</span></span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sound-system.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="blocks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/07-animation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
