<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Scene | Fyrox Book</title>
  <meta name="description" content="<p>A book for the Fyrox Game Engine
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Scene | Fyrox Book" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>A book for the Fyrox Game Engine
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Scene | Fyrox Book" />
  
  <meta name="twitter:description" content="<p>A book for the Fyrox Game Engine
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Dmitry Stepanov" />


<meta name="date" content="2024-06-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="scripting.html"/>
<link rel="next" href="physics-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Fyrox Game Engine Book</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#engine-version"><i class="fa fa-check"></i><b>1.1</b> Engine Version</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#how-to-read-the-book"><i class="fa fa-check"></i><b>1.2</b> How to read the book</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#api-documentation"><i class="fa fa-check"></i><b>1.3</b> API Documentation</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#required-knowledge"><i class="fa fa-check"></i><b>1.4</b> Required knowledge</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#support-the-development"><i class="fa fa-check"></i><b>1.5</b> Support the development</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#introduction-to-fyrox"><i class="fa fa-check"></i><b>2.1</b> Introduction to Fyrox</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction.html"><a href="introduction.html#what-can-the-engine-do"><i class="fa fa-check"></i><b>2.1.1</b> What can the engine do?</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction.html"><a href="introduction.html#how-does-the-engine-work"><i class="fa fa-check"></i><b>2.1.2</b> How does the engine work?</a></li>
<li class="chapter" data-level="2.1.3" data-path="introduction.html"><a href="introduction.html#programming-languages"><i class="fa fa-check"></i><b>2.1.3</b> Programming languages</a></li>
<li class="chapter" data-level="2.1.4" data-path="introduction.html"><a href="introduction.html#engine-features"><i class="fa fa-check"></i><b>2.1.4</b> Engine Features</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#system-requirements"><i class="fa fa-check"></i><b>2.2</b> System Requirements</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction.html"><a href="introduction.html#supported-platforms"><i class="fa fa-check"></i><b>2.2.1</b> Supported Platforms</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#basic-concepts"><i class="fa fa-check"></i><b>2.3</b> Basic concepts</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#classic-oop"><i class="fa fa-check"></i><b>2.3.1</b> Classic OOP</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction.html"><a href="introduction.html#scenes"><i class="fa fa-check"></i><b>2.3.2</b> Scenes</a></li>
<li class="chapter" data-level="2.3.3" data-path="introduction.html"><a href="introduction.html#nodes-and-scene-graph"><i class="fa fa-check"></i><b>2.3.3</b> Nodes and Scene Graph</a></li>
<li class="chapter" data-level="2.3.4" data-path="introduction.html"><a href="introduction.html#plugins"><i class="fa fa-check"></i><b>2.3.4</b> Plugins</a></li>
<li class="chapter" data-level="2.3.5" data-path="introduction.html"><a href="introduction.html#scripts"><i class="fa fa-check"></i><b>2.3.5</b> Scripts</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#design-philosophy-and-goals"><i class="fa fa-check"></i><b>2.4</b> Design Philosophy and Goals</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#safety"><i class="fa fa-check"></i><b>2.4.1</b> Safety</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction.html"><a href="introduction.html#performance"><i class="fa fa-check"></i><b>2.4.2</b> Performance</a></li>
<li class="chapter" data-level="2.4.3" data-path="introduction.html"><a href="introduction.html#ease-of-use"><i class="fa fa-check"></i><b>2.4.3</b> Ease of use</a></li>
<li class="chapter" data-level="2.4.4" data-path="introduction.html"><a href="introduction.html#battle-tested"><i class="fa fa-check"></i><b>2.4.4</b> Battle-tested</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#frequently-asked-questions"><i class="fa fa-check"></i><b>2.5</b> Frequently Asked Questions</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction.html"><a href="introduction.html#which-graphics-api-does-the-engine-use"><i class="fa fa-check"></i><b>2.5.1</b> Which graphics API does the engine use?</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction.html"><a href="introduction.html#is-the-engine-based-on-ecs"><i class="fa fa-check"></i><b>2.5.2</b> Is the engine based on ECS?</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction.html"><a href="introduction.html#what-kinds-of-games-can-i-make-using-fyrox"><i class="fa fa-check"></i><b>2.5.3</b> What kinds of games can I make using Fyrox?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>3</b> Getting Started</a>
<ul>
<li class="chapter" data-level="3.1" data-path="getting-started.html"><a href="getting-started.html#editor-plugins-and-scripts"><i class="fa fa-check"></i><b>3.1</b> Editor, Plugins and Scripts</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="getting-started.html"><a href="getting-started.html#platform-specific-dependencies"><i class="fa fa-check"></i><b>3.1.1</b> Platform-specific Dependencies</a></li>
<li class="chapter" data-level="3.1.2" data-path="getting-started.html"><a href="getting-started.html#quick-start"><i class="fa fa-check"></i><b>3.1.2</b> Quick Start</a></li>
<li class="chapter" data-level="3.1.3" data-path="getting-started.html"><a href="getting-started.html#project-generator"><i class="fa fa-check"></i><b>3.1.3</b> Project Generator</a></li>
<li class="chapter" data-level="3.1.4" data-path="getting-started.html"><a href="getting-started.html#using-the-latest-engine-version"><i class="fa fa-check"></i><b>3.1.4</b> Using the Latest Engine Version</a></li>
<li class="chapter" data-level="3.1.5" data-path="getting-started.html"><a href="getting-started.html#adding-game-logic"><i class="fa fa-check"></i><b>3.1.5</b> Adding Game Logic</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="getting-started.html"><a href="getting-started.html#code-hot-reloading"><i class="fa fa-check"></i><b>3.2</b> Code Hot Reloading</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="getting-started.html"><a href="getting-started.html#how-to-use"><i class="fa fa-check"></i><b>3.2.1</b> How To Use</a></li>
<li class="chapter" data-level="3.2.2" data-path="getting-started.html"><a href="getting-started.html#build-profiles"><i class="fa fa-check"></i><b>3.2.2</b> Build Profiles</a></li>
<li class="chapter" data-level="3.2.3" data-path="getting-started.html"><a href="getting-started.html#stability"><i class="fa fa-check"></i><b>3.2.3</b> Stability</a></li>
<li class="chapter" data-level="3.2.4" data-path="getting-started.html"><a href="getting-started.html#technical-details-and-limitations"><i class="fa fa-check"></i><b>3.2.4</b> Technical Details and Limitations</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="getting-started.html"><a href="getting-started.html#fyroxed-overview"><i class="fa fa-check"></i><b>3.3</b> FyroxEd Overview</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="getting-started.html"><a href="getting-started.html#windows"><i class="fa fa-check"></i><b>3.3.1</b> Windows</a></li>
<li class="chapter" data-level="3.3.2" data-path="getting-started.html"><a href="getting-started.html#creating-or-loading-a-scene"><i class="fa fa-check"></i><b>3.3.2</b> Creating or loading a Scene</a></li>
<li class="chapter" data-level="3.3.3" data-path="getting-started.html"><a href="getting-started.html#populating-a-scene"><i class="fa fa-check"></i><b>3.3.3</b> Populating a Scene</a></li>
<li class="chapter" data-level="3.3.4" data-path="getting-started.html"><a href="getting-started.html#saving-a-scene"><i class="fa fa-check"></i><b>3.3.4</b> Saving a Scene</a></li>
<li class="chapter" data-level="3.3.5" data-path="getting-started.html"><a href="getting-started.html#undoing-and-redoing"><i class="fa fa-check"></i><b>3.3.5</b> Undoing and redoing</a></li>
<li class="chapter" data-level="3.3.6" data-path="getting-started.html"><a href="getting-started.html#controls"><i class="fa fa-check"></i><b>3.3.6</b> Controls</a></li>
<li class="chapter" data-level="3.3.7" data-path="getting-started.html"><a href="getting-started.html#play-mode"><i class="fa fa-check"></i><b>3.3.7</b> Play Mode</a></li>
<li class="chapter" data-level="3.3.8" data-path="getting-started.html"><a href="getting-started.html#additional-utilities"><i class="fa fa-check"></i><b>3.3.8</b> Additional Utilities</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="getting-started.html"><a href="getting-started.html#scene-and-scene-graph"><i class="fa fa-check"></i><b>3.4</b> Scene and Scene Graph</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="getting-started.html"><a href="getting-started.html#building-blocks-or-scene-nodes"><i class="fa fa-check"></i><b>3.4.1</b> Building Blocks or Scene Nodes</a></li>
<li class="chapter" data-level="3.4.2" data-path="getting-started.html"><a href="getting-started.html#local-and-global-coordinates"><i class="fa fa-check"></i><b>3.4.2</b> Local and Global Coordinates</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="getting-started.html"><a href="getting-started.html#assets"><i class="fa fa-check"></i><b>3.5</b> Assets</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="getting-started.html"><a href="getting-started.html#asset-types"><i class="fa fa-check"></i><b>3.5.1</b> Asset Types</a></li>
<li class="chapter" data-level="3.5.2" data-path="getting-started.html"><a href="getting-started.html#asset-management-1"><i class="fa fa-check"></i><b>3.5.2</b> Asset Management</a></li>
<li class="chapter" data-level="3.5.3" data-path="getting-started.html"><a href="getting-started.html#asset-instantiation"><i class="fa fa-check"></i><b>3.5.3</b> Asset Instantiation</a></li>
<li class="chapter" data-level="3.5.4" data-path="getting-started.html"><a href="getting-started.html#loading-assets"><i class="fa fa-check"></i><b>3.5.4</b> Loading Assets</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="getting-started.html"><a href="getting-started.html#data-management"><i class="fa fa-check"></i><b>3.6</b> Data Management</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="getting-started.html"><a href="getting-started.html#motivation"><i class="fa fa-check"></i><b>3.6.1</b> Motivation</a></li>
<li class="chapter" data-level="3.6.2" data-path="getting-started.html"><a href="getting-started.html#technical-details"><i class="fa fa-check"></i><b>3.6.2</b> Technical Details</a></li>
<li class="chapter" data-level="3.6.3" data-path="getting-started.html"><a href="getting-started.html#advantages"><i class="fa fa-check"></i><b>3.6.3</b> Advantages</a></li>
<li class="chapter" data-level="3.6.4" data-path="getting-started.html"><a href="getting-started.html#disadvantages"><i class="fa fa-check"></i><b>3.6.4</b> Disadvantages</a></li>
<li class="chapter" data-level="3.6.5" data-path="getting-started.html"><a href="getting-started.html#usage"><i class="fa fa-check"></i><b>3.6.5</b> Usage</a></li>
<li class="chapter" data-level="3.6.6" data-path="getting-started.html"><a href="getting-started.html#borrowing"><i class="fa fa-check"></i><b>3.6.6</b> Borrowing</a></li>
<li class="chapter" data-level="3.6.7" data-path="getting-started.html"><a href="getting-started.html#freeing"><i class="fa fa-check"></i><b>3.6.7</b> Freeing</a></li>
<li class="chapter" data-level="3.6.8" data-path="getting-started.html"><a href="getting-started.html#take-and-reserve"><i class="fa fa-check"></i><b>3.6.8</b> Take and Reserve</a></li>
<li class="chapter" data-level="3.6.9" data-path="getting-started.html"><a href="getting-started.html#iterators"><i class="fa fa-check"></i><b>3.6.9</b> Iterators</a></li>
<li class="chapter" data-level="3.6.10" data-path="getting-started.html"><a href="getting-started.html#direct-access"><i class="fa fa-check"></i><b>3.6.10</b> Direct Access</a></li>
<li class="chapter" data-level="3.6.11" data-path="getting-started.html"><a href="getting-started.html#validation"><i class="fa fa-check"></i><b>3.6.11</b> Validation</a></li>
<li class="chapter" data-level="3.6.12" data-path="getting-started.html"><a href="getting-started.html#type-erased-handles"><i class="fa fa-check"></i><b>3.6.12</b> Type-erased Handles</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="getting-started.html"><a href="getting-started.html#borrow-checker"><i class="fa fa-check"></i><b>3.7</b> Borrow Checker</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="getting-started.html"><a href="getting-started.html#multiple-borrowing"><i class="fa fa-check"></i><b>3.7.1</b> Multiple Borrowing</a></li>
<li class="chapter" data-level="3.7.2" data-path="getting-started.html"><a href="getting-started.html#message-passing"><i class="fa fa-check"></i><b>3.7.2</b> Message Passing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="scripting.html"><a href="scripting.html"><i class="fa fa-check"></i><b>4</b> Scripting</a>
<ul>
<li class="chapter" data-level="4.1" data-path="scripting.html"><a href="scripting.html#plugins-1"><i class="fa fa-check"></i><b>4.1</b> Plugins</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="scripting.html"><a href="scripting.html#structure"><i class="fa fa-check"></i><b>4.1.1</b> Structure</a></li>
<li class="chapter" data-level="4.1.2" data-path="scripting.html"><a href="scripting.html#plugin-context"><i class="fa fa-check"></i><b>4.1.2</b> Plugin Context</a></li>
<li class="chapter" data-level="4.1.3" data-path="scripting.html"><a href="scripting.html#control-flow"><i class="fa fa-check"></i><b>4.1.3</b> Control Flow</a></li>
<li class="chapter" data-level="4.1.4" data-path="scripting.html"><a href="scripting.html#editor-and-plugins"><i class="fa fa-check"></i><b>4.1.4</b> Editor and Plugins</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="scripting.html"><a href="scripting.html#executor"><i class="fa fa-check"></i><b>4.2</b> Executor</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="scripting.html"><a href="scripting.html#usage-1"><i class="fa fa-check"></i><b>4.2.1</b> Usage</a></li>
<li class="chapter" data-level="4.2.2" data-path="scripting.html"><a href="scripting.html#typical-use-cases"><i class="fa fa-check"></i><b>4.2.2</b> Typical Use Cases</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="scripting.html"><a href="scripting.html#scripts-1"><i class="fa fa-check"></i><b>4.3</b> Scripts</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="scripting.html"><a href="scripting.html#when-to-use-scripts-and-when-not"><i class="fa fa-check"></i><b>4.3.1</b> When to Use Scripts and When Not</a></li>
<li class="chapter" data-level="4.3.2" data-path="scripting.html"><a href="scripting.html#script-structure"><i class="fa fa-check"></i><b>4.3.2</b> Script Structure</a></li>
<li class="chapter" data-level="4.3.3" data-path="scripting.html"><a href="scripting.html#script-template-generator"><i class="fa fa-check"></i><b>4.3.3</b> Script Template Generator</a></li>
<li class="chapter" data-level="4.3.4" data-path="scripting.html"><a href="scripting.html#script-registration"><i class="fa fa-check"></i><b>4.3.4</b> Script Registration</a></li>
<li class="chapter" data-level="4.3.5" data-path="scripting.html"><a href="scripting.html#script-attachment"><i class="fa fa-check"></i><b>4.3.5</b> Script Attachment</a></li>
<li class="chapter" data-level="4.3.6" data-path="scripting.html"><a href="scripting.html#script-context"><i class="fa fa-check"></i><b>4.3.6</b> Script Context</a></li>
<li class="chapter" data-level="4.3.7" data-path="scripting.html"><a href="scripting.html#execution-order"><i class="fa fa-check"></i><b>4.3.7</b> Execution order</a></li>
<li class="chapter" data-level="4.3.8" data-path="scripting.html"><a href="scripting.html#message-passing-1"><i class="fa fa-check"></i><b>4.3.8</b> Message passing</a></li>
<li class="chapter" data-level="4.3.9" data-path="scripting.html"><a href="scripting.html#accessing-other-scripts-data"><i class="fa fa-check"></i><b>4.3.9</b> Accessing Other Script’s Data</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="scripting.html"><a href="scripting.html#tasks"><i class="fa fa-check"></i><b>4.4</b> Tasks</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="scripting.html"><a href="scripting.html#how-it-works"><i class="fa fa-check"></i><b>4.4.1</b> How it works</a></li>
<li class="chapter" data-level="4.4.2" data-path="scripting.html"><a href="scripting.html#examples"><i class="fa fa-check"></i><b>4.4.2</b> Examples</a></li>
<li class="chapter" data-level="4.4.3" data-path="scripting.html"><a href="scripting.html#performance-1"><i class="fa fa-check"></i><b>4.4.3</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="scene-1.html"><a href="scene-1.html"><i class="fa fa-check"></i><b>5</b> Scene</a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create"><i class="fa fa-check"></i><b>5.0.1</b> How to create</a></li>
<li class="chapter" data-level="5.0.2" data-path="scene-1.html"><a href="scene-1.html#where-all-my-scenes-located"><i class="fa fa-check"></i><b>5.0.2</b> Where all my scenes located?</a></li>
<li class="chapter" data-level="5.0.3" data-path="scene-1.html"><a href="scene-1.html#building-scene-asynchronously"><i class="fa fa-check"></i><b>5.0.3</b> Building scene asynchronously</a></li>
<li class="chapter" data-level="5.0.4" data-path="scene-1.html"><a href="scene-1.html#managing-multiple-scenes"><i class="fa fa-check"></i><b>5.0.4</b> Managing multiple scenes</a></li>
<li class="chapter" data-level="5.0.5" data-path="scene-1.html"><a href="scene-1.html#ambient-lighting"><i class="fa fa-check"></i><b>5.0.5</b> Ambient lighting</a></li>
<li class="chapter" data-level="5.1" data-path="scene-1.html"><a href="scene-1.html#graph"><i class="fa fa-check"></i><b>5.1</b> Graph</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-1"><i class="fa fa-check"></i><b>5.1.1</b> How to create</a></li>
<li class="chapter" data-level="5.1.2" data-path="scene-1.html"><a href="scene-1.html#adding-nodes"><i class="fa fa-check"></i><b>5.1.2</b> Adding nodes</a></li>
<li class="chapter" data-level="5.1.3" data-path="scene-1.html"><a href="scene-1.html#how-to-modify-the-hierarchy"><i class="fa fa-check"></i><b>5.1.3</b> How to modify the hierarchy</a></li>
<li class="chapter" data-level="5.1.4" data-path="scene-1.html"><a href="scene-1.html#how-to-remove-nodes"><i class="fa fa-check"></i><b>5.1.4</b> How to remove nodes</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="scene-1.html"><a href="scene-1.html#transformation"><i class="fa fa-check"></i><b>5.2</b> Transformation</a></li>
<li class="chapter" data-level="5.3" data-path="scene-1.html"><a href="scene-1.html#prefabs"><i class="fa fa-check"></i><b>5.3</b> Prefabs</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-and-use-a-prefab"><i class="fa fa-check"></i><b>5.3.1</b> How to create and use a prefab</a></li>
<li class="chapter" data-level="5.3.2" data-path="scene-1.html"><a href="scene-1.html#property-inheritance"><i class="fa fa-check"></i><b>5.3.2</b> Property inheritance</a></li>
<li class="chapter" data-level="5.3.3" data-path="scene-1.html"><a href="scene-1.html#hierarchical-prefabs"><i class="fa fa-check"></i><b>5.3.3</b> Hierarchical Prefabs</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="scene-1.html"><a href="scene-1.html#property-inheritance-1"><i class="fa fa-check"></i><b>5.4</b> Property Inheritance</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-inheritable-properties"><i class="fa fa-check"></i><b>5.4.1</b> How To Create Inheritable Properties</a></li>
<li class="chapter" data-level="5.4.2" data-path="scene-1.html"><a href="scene-1.html#which-fields-should-be-inheritable"><i class="fa fa-check"></i><b>5.4.2</b> Which Fields Should Be Inheritable?</a></li>
<li class="chapter" data-level="5.4.3" data-path="scene-1.html"><a href="scene-1.html#editor"><i class="fa fa-check"></i><b>5.4.3</b> Editor</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="scene-1.html"><a href="scene-1.html#base-node"><i class="fa fa-check"></i><b>5.5</b> Base node</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-2"><i class="fa fa-check"></i><b>5.5.1</b> How to create</a></li>
<li class="chapter" data-level="5.5.2" data-path="scene-1.html"><a href="scene-1.html#building-a-complex-hierarchy"><i class="fa fa-check"></i><b>5.5.2</b> Building a complex hierarchy</a></li>
<li class="chapter" data-level="5.5.3" data-path="scene-1.html"><a href="scene-1.html#transform"><i class="fa fa-check"></i><b>5.5.3</b> Transform</a></li>
<li class="chapter" data-level="5.5.4" data-path="scene-1.html"><a href="scene-1.html#visibility"><i class="fa fa-check"></i><b>5.5.4</b> Visibility</a></li>
<li class="chapter" data-level="5.5.5" data-path="scene-1.html"><a href="scene-1.html#enablingdisabling-scene-nodes"><i class="fa fa-check"></i><b>5.5.5</b> Enabling/disabling scene nodes</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="scene-1.html"><a href="scene-1.html#mesh-node"><i class="fa fa-check"></i><b>5.6</b> Mesh node</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="scene-1.html"><a href="scene-1.html#surfaces"><i class="fa fa-check"></i><b>5.6.1</b> Surfaces</a></li>
<li class="chapter" data-level="5.6.2" data-path="scene-1.html"><a href="scene-1.html#how-to-create-3"><i class="fa fa-check"></i><b>5.6.2</b> How to create</a></li>
<li class="chapter" data-level="5.6.3" data-path="scene-1.html"><a href="scene-1.html#animation-1"><i class="fa fa-check"></i><b>5.6.3</b> Animation</a></li>
<li class="chapter" data-level="5.6.4" data-path="scene-1.html"><a href="scene-1.html#data-buffers"><i class="fa fa-check"></i><b>5.6.4</b> Data Buffers</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="scene-1.html"><a href="scene-1.html#light-node"><i class="fa fa-check"></i><b>5.7</b> Light node</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="scene-1.html"><a href="scene-1.html#light-types"><i class="fa fa-check"></i><b>5.7.1</b> Light types</a></li>
<li class="chapter" data-level="5.7.2" data-path="scene-1.html"><a href="scene-1.html#light-scattering"><i class="fa fa-check"></i><b>5.7.2</b> Light scattering</a></li>
<li class="chapter" data-level="5.7.3" data-path="scene-1.html"><a href="scene-1.html#shadows"><i class="fa fa-check"></i><b>5.7.3</b> Shadows</a></li>
<li class="chapter" data-level="5.7.4" data-path="scene-1.html"><a href="scene-1.html#performance-2"><i class="fa fa-check"></i><b>5.7.4</b> Performance</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="scene-1.html"><a href="scene-1.html#sprite"><i class="fa fa-check"></i><b>5.8</b> Sprite</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-4"><i class="fa fa-check"></i><b>5.8.1</b> How to create</a></li>
<li class="chapter" data-level="5.8.2" data-path="scene-1.html"><a href="scene-1.html#animation-2"><i class="fa fa-check"></i><b>5.8.2</b> Animation</a></li>
<li class="chapter" data-level="5.8.3" data-path="scene-1.html"><a href="scene-1.html#general-rules"><i class="fa fa-check"></i><b>5.8.3</b> General rules</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="scene-1.html"><a href="scene-1.html#particle-system"><i class="fa fa-check"></i><b>5.9</b> Particle system</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="scene-1.html"><a href="scene-1.html#basic-concepts-1"><i class="fa fa-check"></i><b>5.9.1</b> Basic Concepts</a></li>
<li class="chapter" data-level="5.9.2" data-path="scene-1.html"><a href="scene-1.html#how-to-create-5"><i class="fa fa-check"></i><b>5.9.2</b> How to create</a></li>
<li class="chapter" data-level="5.9.3" data-path="scene-1.html"><a href="scene-1.html#soft-particles"><i class="fa fa-check"></i><b>5.9.3</b> Soft particles</a></li>
<li class="chapter" data-level="5.9.4" data-path="scene-1.html"><a href="scene-1.html#restarting-emission"><i class="fa fa-check"></i><b>5.9.4</b> Restarting emission</a></li>
<li class="chapter" data-level="5.9.5" data-path="scene-1.html"><a href="scene-1.html#enabling-or-disabling-particle-systems"><i class="fa fa-check"></i><b>5.9.5</b> Enabling or disabling particle systems</a></li>
<li class="chapter" data-level="5.9.6" data-path="scene-1.html"><a href="scene-1.html#performance-3"><i class="fa fa-check"></i><b>5.9.6</b> Performance</a></li>
<li class="chapter" data-level="5.9.7" data-path="scene-1.html"><a href="scene-1.html#limitations"><i class="fa fa-check"></i><b>5.9.7</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="scene-1.html"><a href="scene-1.html#terrain"><i class="fa fa-check"></i><b>5.10</b> Terrain</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="scene-1.html"><a href="scene-1.html#basic-concepts-2"><i class="fa fa-check"></i><b>5.10.1</b> Basic concepts</a></li>
<li class="chapter" data-level="5.10.2" data-path="scene-1.html"><a href="scene-1.html#creating-terrain-in-the-editor"><i class="fa fa-check"></i><b>5.10.2</b> Creating terrain in the editor</a></li>
<li class="chapter" data-level="5.10.3" data-path="scene-1.html"><a href="scene-1.html#creating-terrain-from-code"><i class="fa fa-check"></i><b>5.10.3</b> Creating terrain from code</a></li>
<li class="chapter" data-level="5.10.4" data-path="scene-1.html"><a href="scene-1.html#physics-1"><i class="fa fa-check"></i><b>5.10.4</b> Physics</a></li>
<li class="chapter" data-level="5.10.5" data-path="scene-1.html"><a href="scene-1.html#performance-4"><i class="fa fa-check"></i><b>5.10.5</b> Performance</a></li>
<li class="chapter" data-level="5.10.6" data-path="scene-1.html"><a href="scene-1.html#chunking"><i class="fa fa-check"></i><b>5.10.6</b> Chunking</a></li>
<li class="chapter" data-level="5.10.7" data-path="scene-1.html"><a href="scene-1.html#level-of-detail"><i class="fa fa-check"></i><b>5.10.7</b> Level-of-detail</a></li>
<li class="chapter" data-level="5.10.8" data-path="scene-1.html"><a href="scene-1.html#limitations-and-known-issues"><i class="fa fa-check"></i><b>5.10.8</b> Limitations and known issues</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="scene-1.html"><a href="scene-1.html#camera-node"><i class="fa fa-check"></i><b>5.11</b> Camera node</a>
<ul>
<li class="chapter" data-level="5.11.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-6"><i class="fa fa-check"></i><b>5.11.1</b> How to create</a></li>
<li class="chapter" data-level="5.11.2" data-path="scene-1.html"><a href="scene-1.html#projection-modes"><i class="fa fa-check"></i><b>5.11.2</b> Projection modes</a></li>
<li class="chapter" data-level="5.11.3" data-path="scene-1.html"><a href="scene-1.html#performance-5"><i class="fa fa-check"></i><b>5.11.3</b> Performance</a></li>
<li class="chapter" data-level="5.11.4" data-path="scene-1.html"><a href="scene-1.html#skybox"><i class="fa fa-check"></i><b>5.11.4</b> Skybox</a></li>
<li class="chapter" data-level="5.11.5" data-path="scene-1.html"><a href="scene-1.html#color-grading-look-up-tables"><i class="fa fa-check"></i><b>5.11.5</b> Color grading look-up tables</a></li>
<li class="chapter" data-level="5.11.6" data-path="scene-1.html"><a href="scene-1.html#picking"><i class="fa fa-check"></i><b>5.11.6</b> Picking</a></li>
</ul></li>
<li class="chapter" data-level="5.12" data-path="scene-1.html"><a href="scene-1.html#exposure-and-hdr"><i class="fa fa-check"></i><b>5.12</b> Exposure and HDR</a></li>
<li class="chapter" data-level="5.13" data-path="scene-1.html"><a href="scene-1.html#decal-node"><i class="fa fa-check"></i><b>5.13</b> Decal node</a>
<ul>
<li class="chapter" data-level="5.13.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-7"><i class="fa fa-check"></i><b>5.13.1</b> How to create</a></li>
<li class="chapter" data-level="5.13.2" data-path="scene-1.html"><a href="scene-1.html#textures"><i class="fa fa-check"></i><b>5.13.2</b> Textures</a></li>
<li class="chapter" data-level="5.13.3" data-path="scene-1.html"><a href="scene-1.html#rendering-1"><i class="fa fa-check"></i><b>5.13.3</b> Rendering</a></li>
<li class="chapter" data-level="5.13.4" data-path="scene-1.html"><a href="scene-1.html#bounds"><i class="fa fa-check"></i><b>5.13.4</b> Bounds</a></li>
<li class="chapter" data-level="5.13.5" data-path="scene-1.html"><a href="scene-1.html#layers-1"><i class="fa fa-check"></i><b>5.13.5</b> Layers</a></li>
<li class="chapter" data-level="5.13.6" data-path="scene-1.html"><a href="scene-1.html#performance-6"><i class="fa fa-check"></i><b>5.13.6</b> Performance</a></li>
</ul></li>
<li class="chapter" data-level="5.14" data-path="scene-1.html"><a href="scene-1.html#rectangle-node"><i class="fa fa-check"></i><b>5.14</b> Rectangle node</a>
<ul>
<li class="chapter" data-level="5.14.1" data-path="scene-1.html"><a href="scene-1.html#how-to-create-8"><i class="fa fa-check"></i><b>5.14.1</b> How to create</a></li>
<li class="chapter" data-level="5.14.2" data-path="scene-1.html"><a href="scene-1.html#specifying-image-portion-for-rendering"><i class="fa fa-check"></i><b>5.14.2</b> Specifying image portion for rendering</a></li>
<li class="chapter" data-level="5.14.3" data-path="scene-1.html"><a href="scene-1.html#animation-3"><i class="fa fa-check"></i><b>5.14.3</b> Animation</a></li>
<li class="chapter" data-level="5.14.4" data-path="scene-1.html"><a href="scene-1.html#performance-7"><i class="fa fa-check"></i><b>5.14.4</b> Performance</a></li>
</ul></li>
<li class="chapter" data-level="5.15" data-path="scene-1.html"><a href="scene-1.html#custom-scene-node"><i class="fa fa-check"></i><b>5.15</b> Custom Scene Node</a>
<ul>
<li class="chapter" data-level="5.15.1" data-path="scene-1.html"><a href="scene-1.html#limitations-1"><i class="fa fa-check"></i><b>5.15.1</b> Limitations</a></li>
<li class="chapter" data-level="5.15.2" data-path="scene-1.html"><a href="scene-1.html#editor-support"><i class="fa fa-check"></i><b>5.15.2</b> Editor support</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="physics-2.html"><a href="physics-2.html"><i class="fa fa-check"></i><b>6</b> Physics</a>
<ul>
<li class="chapter" data-level="6.0.1" data-path="physics-2.html"><a href="physics-2.html#differences-between-3d-and-2d"><i class="fa fa-check"></i><b>6.0.1</b> Differences between 3D and 2D</a></li>
<li class="chapter" data-level="6.1" data-path="physics-2.html"><a href="physics-2.html#rigid-body-node"><i class="fa fa-check"></i><b>6.1</b> Rigid body node</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="physics-2.html"><a href="physics-2.html#how-to-create-9"><i class="fa fa-check"></i><b>6.1.1</b> How to create</a></li>
<li class="chapter" data-level="6.1.2" data-path="physics-2.html"><a href="physics-2.html#colliders"><i class="fa fa-check"></i><b>6.1.2</b> Colliders</a></li>
<li class="chapter" data-level="6.1.3" data-path="physics-2.html"><a href="physics-2.html#force-and-torque"><i class="fa fa-check"></i><b>6.1.3</b> Force and torque</a></li>
<li class="chapter" data-level="6.1.4" data-path="physics-2.html"><a href="physics-2.html#kinematic-rigid-bodies"><i class="fa fa-check"></i><b>6.1.4</b> Kinematic rigid bodies</a></li>
<li class="chapter" data-level="6.1.5" data-path="physics-2.html"><a href="physics-2.html#continuous-collision-detection"><i class="fa fa-check"></i><b>6.1.5</b> Continuous collision detection</a></li>
<li class="chapter" data-level="6.1.6" data-path="physics-2.html"><a href="physics-2.html#dominance"><i class="fa fa-check"></i><b>6.1.6</b> Dominance</a></li>
<li class="chapter" data-level="6.1.7" data-path="physics-2.html"><a href="physics-2.html#d-rigid-bodies"><i class="fa fa-check"></i><b>6.1.7</b> 2D rigid bodies</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="physics-2.html"><a href="physics-2.html#collider-node"><i class="fa fa-check"></i><b>6.2</b> Collider node</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="physics-2.html"><a href="physics-2.html#shapes"><i class="fa fa-check"></i><b>6.2.1</b> Shapes</a></li>
<li class="chapter" data-level="6.2.2" data-path="physics-2.html"><a href="physics-2.html#how-to-create-10"><i class="fa fa-check"></i><b>6.2.2</b> How to create</a></li>
<li class="chapter" data-level="6.2.3" data-path="physics-2.html"><a href="physics-2.html#collision-filtering"><i class="fa fa-check"></i><b>6.2.3</b> Collision filtering</a></li>
<li class="chapter" data-level="6.2.4" data-path="physics-2.html"><a href="physics-2.html#using-colliders-for-hit-boxes"><i class="fa fa-check"></i><b>6.2.4</b> Using colliders for hit boxes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="physics-2.html"><a href="physics-2.html#joint"><i class="fa fa-check"></i><b>6.3</b> Joint</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="physics-2.html"><a href="physics-2.html#bodies-binding"><i class="fa fa-check"></i><b>6.3.1</b> Bodies Binding</a></li>
<li class="chapter" data-level="6.3.2" data-path="physics-2.html"><a href="physics-2.html#how-to-create-11"><i class="fa fa-check"></i><b>6.3.2</b> How to create</a></li>
<li class="chapter" data-level="6.3.3" data-path="physics-2.html"><a href="physics-2.html#limits"><i class="fa fa-check"></i><b>6.3.3</b> Limits</a></li>
<li class="chapter" data-level="6.3.4" data-path="physics-2.html"><a href="physics-2.html#usage-2"><i class="fa fa-check"></i><b>6.3.4</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="physics-2.html"><a href="physics-2.html#ray-casting"><i class="fa fa-check"></i><b>6.4</b> Ray Casting</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="physics-2.html"><a href="physics-2.html#avoiding-unnecessary-allocations"><i class="fa fa-check"></i><b>6.4.1</b> Avoiding unnecessary allocations</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="physics-2.html"><a href="physics-2.html#ragdoll"><i class="fa fa-check"></i><b>6.5</b> Ragdoll</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="physics-2.html"><a href="physics-2.html#how-to-create-12"><i class="fa fa-check"></i><b>6.5.1</b> How To Create</a></li>
<li class="chapter" data-level="6.5.2" data-path="physics-2.html"><a href="physics-2.html#video-tutorials"><i class="fa fa-check"></i><b>6.5.2</b> Video Tutorials</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sound-system.html"><a href="sound-system.html"><i class="fa fa-check"></i><b>7</b> Sound System</a>
<ul>
<li class="chapter" data-level="7.1" data-path="sound-system.html"><a href="sound-system.html#audio-bus"><i class="fa fa-check"></i><b>7.1</b> Audio Bus</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="sound-system.html"><a href="sound-system.html#graph-1"><i class="fa fa-check"></i><b>7.1.1</b> Graph</a></li>
<li class="chapter" data-level="7.1.2" data-path="sound-system.html"><a href="sound-system.html#effects"><i class="fa fa-check"></i><b>7.1.2</b> Effects</a></li>
<li class="chapter" data-level="7.1.3" data-path="sound-system.html"><a href="sound-system.html#editor-1"><i class="fa fa-check"></i><b>7.1.3</b> Editor</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="sound-system.html"><a href="sound-system.html#sound-1"><i class="fa fa-check"></i><b>7.2</b> Sound</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="sound-system.html"><a href="sound-system.html#how-to-create-13"><i class="fa fa-check"></i><b>7.2.1</b> How to create</a></li>
<li class="chapter" data-level="7.2.2" data-path="sound-system.html"><a href="sound-system.html#d-and-3d"><i class="fa fa-check"></i><b>7.2.2</b> 2D and 3D</a></li>
<li class="chapter" data-level="7.2.3" data-path="sound-system.html"><a href="sound-system.html#audio-bus-1"><i class="fa fa-check"></i><b>7.2.3</b> Audio bus</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="sound-system.html"><a href="sound-system.html#head-related-transfer-function"><i class="fa fa-check"></i><b>7.3</b> Head Related Transfer Function</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="sound-system.html"><a href="sound-system.html#hrtf-on-practice"><i class="fa fa-check"></i><b>7.3.1</b> HRTF on practice</a></li>
<li class="chapter" data-level="7.3.2" data-path="sound-system.html"><a href="sound-system.html#performance-8"><i class="fa fa-check"></i><b>7.3.2</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="animation-4.html"><a href="animation-4.html"><i class="fa fa-check"></i><b>8</b> Animation</a>
<ul>
<li class="chapter" data-level="8.0.1" data-path="animation-4.html"><a href="animation-4.html#web-demo"><i class="fa fa-check"></i><b>8.0.1</b> Web Demo</a></li>
<li class="chapter" data-level="8.0.2" data-path="animation-4.html"><a href="animation-4.html#track-binding"><i class="fa fa-check"></i><b>8.0.2</b> Track binding</a></li>
<li class="chapter" data-level="8.0.3" data-path="animation-4.html"><a href="animation-4.html#time-slice-and-looping"><i class="fa fa-check"></i><b>8.0.3</b> Time slice and looping</a></li>
<li class="chapter" data-level="8.0.4" data-path="animation-4.html"><a href="animation-4.html#speed"><i class="fa fa-check"></i><b>8.0.4</b> Speed</a></li>
<li class="chapter" data-level="8.0.5" data-path="animation-4.html"><a href="animation-4.html#enabling-or-disabling-animations"><i class="fa fa-check"></i><b>8.0.5</b> Enabling or disabling animations</a></li>
<li class="chapter" data-level="8.0.6" data-path="animation-4.html"><a href="animation-4.html#signals"><i class="fa fa-check"></i><b>8.0.6</b> Signals</a></li>
<li class="chapter" data-level="8.0.7" data-path="animation-4.html"><a href="animation-4.html#creating-from-code"><i class="fa fa-check"></i><b>8.0.7</b> Creating From Code</a></li>
<li class="chapter" data-level="8.0.8" data-path="animation-4.html"><a href="animation-4.html#importing"><i class="fa fa-check"></i><b>8.0.8</b> Importing</a></li>
<li class="chapter" data-level="8.0.9" data-path="animation-4.html"><a href="animation-4.html#playing-an-animation"><i class="fa fa-check"></i><b>8.0.9</b> Playing an Animation</a></li>
<li class="chapter" data-level="8.1" data-path="animation-4.html"><a href="animation-4.html#animation-editor"><i class="fa fa-check"></i><b>8.1</b> Animation Editor</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="animation-4.html"><a href="animation-4.html#typical-workflow"><i class="fa fa-check"></i><b>8.1.1</b> Typical Workflow</a></li>
<li class="chapter" data-level="8.1.2" data-path="animation-4.html"><a href="animation-4.html#toolbar"><i class="fa fa-check"></i><b>8.1.2</b> Toolbar</a></li>
<li class="chapter" data-level="8.1.3" data-path="animation-4.html"><a href="animation-4.html#track-list"><i class="fa fa-check"></i><b>8.1.3</b> Track List</a></li>
<li class="chapter" data-level="8.1.4" data-path="animation-4.html"><a href="animation-4.html#curve-editor"><i class="fa fa-check"></i><b>8.1.4</b> Curve Editor</a></li>
<li class="chapter" data-level="8.1.5" data-path="animation-4.html"><a href="animation-4.html#property-binding"><i class="fa fa-check"></i><b>8.1.5</b> Property Binding</a></li>
<li class="chapter" data-level="8.1.6" data-path="animation-4.html"><a href="animation-4.html#animation-importing"><i class="fa fa-check"></i><b>8.1.6</b> Animation Importing</a></li>
<li class="chapter" data-level="8.1.7" data-path="animation-4.html"><a href="animation-4.html#preview-mode"><i class="fa fa-check"></i><b>8.1.7</b> Preview Mode</a></li>
<li class="chapter" data-level="8.1.8" data-path="animation-4.html"><a href="animation-4.html#root-motion"><i class="fa fa-check"></i><b>8.1.8</b> Root Motion</a></li>
<li class="chapter" data-level="8.1.9" data-path="animation-4.html"><a href="animation-4.html#limitations-2"><i class="fa fa-check"></i><b>8.1.9</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="animation-4.html"><a href="animation-4.html#animation-blending"><i class="fa fa-check"></i><b>8.2</b> Animation Blending</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="animation-4.html"><a href="animation-4.html#how-to-create-14"><i class="fa fa-check"></i><b>8.2.1</b> How to create</a></li>
<li class="chapter" data-level="8.2.2" data-path="animation-4.html"><a href="animation-4.html#from-editor-2"><i class="fa fa-check"></i><b>8.2.2</b> From editor</a></li>
<li class="chapter" data-level="8.2.3" data-path="animation-4.html"><a href="animation-4.html#from-code-2"><i class="fa fa-check"></i><b>8.2.3</b> From code</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="animation-4.html"><a href="animation-4.html#animation-blending-state-machine-absm-editor"><i class="fa fa-check"></i><b>8.3</b> Animation Blending State Machine (ABSM) Editor</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="animation-4.html"><a href="animation-4.html#toolbar-1"><i class="fa fa-check"></i><b>8.3.1</b> Toolbar</a></li>
<li class="chapter" data-level="8.3.2" data-path="animation-4.html"><a href="animation-4.html#parameters"><i class="fa fa-check"></i><b>8.3.2</b> Parameters</a></li>
<li class="chapter" data-level="8.3.3" data-path="animation-4.html"><a href="animation-4.html#state-graph"><i class="fa fa-check"></i><b>8.3.3</b> State Graph</a></li>
<li class="chapter" data-level="8.3.4" data-path="animation-4.html"><a href="animation-4.html#state-viewer"><i class="fa fa-check"></i><b>8.3.4</b> State Viewer</a></li>
<li class="chapter" data-level="8.3.5" data-path="animation-4.html"><a href="animation-4.html#layer-mask"><i class="fa fa-check"></i><b>8.3.5</b> Layer Mask</a></li>
<li class="chapter" data-level="8.3.6" data-path="animation-4.html"><a href="animation-4.html#preview-mode-1"><i class="fa fa-check"></i><b>8.3.6</b> Preview Mode</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="animation-4.html"><a href="animation-4.html#signals-1"><i class="fa fa-check"></i><b>8.4</b> Signals</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="animation-4.html"><a href="animation-4.html#how-to-add"><i class="fa fa-check"></i><b>8.4.1</b> How to add</a></li>
<li class="chapter" data-level="8.4.2" data-path="animation-4.html"><a href="animation-4.html#reacting-to-signal-events"><i class="fa fa-check"></i><b>8.4.2</b> Reacting to signal events</a></li>
<li class="chapter" data-level="8.4.3" data-path="animation-4.html"><a href="animation-4.html#events-from-absm"><i class="fa fa-check"></i><b>8.4.3</b> Events from ABSM</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="animation-4.html"><a href="animation-4.html#root-motion-1"><i class="fa fa-check"></i><b>8.5</b> Root Motion</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="animation-4.html"><a href="animation-4.html#how-to-enable"><i class="fa fa-check"></i><b>8.5.1</b> How to enable</a></li>
<li class="chapter" data-level="8.5.2" data-path="animation-4.html"><a href="animation-4.html#how-to-use-1"><i class="fa fa-check"></i><b>8.5.2</b> How to use</a></li>
<li class="chapter" data-level="8.5.3" data-path="animation-4.html"><a href="animation-4.html#combining-root-motion-with-procedural-motion"><i class="fa fa-check"></i><b>8.5.3</b> Combining root motion with procedural motion</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="animation-4.html"><a href="animation-4.html#sprite-animation"><i class="fa fa-check"></i><b>8.6</b> Sprite Animation</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="animation-4.html"><a href="animation-4.html#how-to-use-2"><i class="fa fa-check"></i><b>8.6.1</b> How to use</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="blocks.html"><a href="blocks.html"><i class="fa fa-check"></i><b>9</b> Blocks</a>
<ul>
<li class="chapter" data-level="9.1" data-path="blocks.html"><a href="blocks.html#equations"><i class="fa fa-check"></i><b>9.1</b> Equations</a></li>
<li class="chapter" data-level="9.2" data-path="blocks.html"><a href="blocks.html#theorems-and-proofs"><i class="fa fa-check"></i><b>9.2</b> Theorems and proofs</a></li>
<li class="chapter" data-level="9.3" data-path="blocks.html"><a href="blocks.html#callout-blocks"><i class="fa fa-check"></i><b>9.3</b> Callout blocks</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="sharing-your-book.html"><a href="sharing-your-book.html"><i class="fa fa-check"></i><b>10</b> Sharing your book</a>
<ul>
<li class="chapter" data-level="10.1" data-path="sharing-your-book.html"><a href="sharing-your-book.html#publishing"><i class="fa fa-check"></i><b>10.1</b> Publishing</a></li>
<li class="chapter" data-level="10.2" data-path="sharing-your-book.html"><a href="sharing-your-book.html#pages"><i class="fa fa-check"></i><b>10.2</b> 404 pages</a></li>
<li class="chapter" data-level="10.3" data-path="sharing-your-book.html"><a href="sharing-your-book.html#metadata-for-sharing"><i class="fa fa-check"></i><b>10.3</b> Metadata for sharing</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Fyrox Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="scene-1" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Scene<a href="scene-1.html#scene-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Scene is a container for game entities. Currently, scenes in the engine manage following entities:</p>
<ol style="list-style-type: decimal">
<li>Graph</li>
<li>Animations</li>
<li>Physics (rigid bodies, colliders, joints)</li>
<li>Sound</li>
</ol>
<p>Scene allows you to create isolated “world” which won’t interact with other scenes, it is very useful for many more or less complex games.</p>
<div id="how-to-create" class="section level3 hasAnchor" number="5.0.1">
<h3><span class="header-section-number">5.0.1</span> How to create<a href="scene-1.html#how-to-create" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A scene could be created either in FyroxEd or programmatically. You can also combine both approaches, where you build all “static” content in the editor and adding rest of the entities (bots, interactive objects, etc.) manually by instantiating respective prefabs at runtime.</p>
<div id="using-fyroxed" class="section level4 hasAnchor" number="5.0.1.1">
<h4><span class="header-section-number">5.0.1.1</span> Using FyroxEd<a href="scene-1.html#using-fyroxed" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There is a <a href="../beginning/editor_overview.md">separate chapter</a> in the book that should help you to create a scene. After a scene is created, you can load it using async scene loader:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/mod.rs:load_scene}}</code></pre>
<p>The code is quite straightforward. At first, we’re using async scene loader to create a scene loading request. This request will be processed in a separate thread, leaving your game fully responsible while the scene is loading. Next, when the scene is fully loaded and added to the engine, <code>on_scene_loaded</code> method is called. Usually there’s only one active scene, so we’re removing the previous one and setting the new one as active.</p>
<p>There are two additional methods:</p>
<ol style="list-style-type: decimal">
<li><code>on_scene_begin_loading</code> - is called when a scene is just began to load. Keep in mind, that async scene loader could load multiple scenes at once and this method is guaranteed to be called exactly before the scene is started to load.</li>
<li><code>on_scene_loading_failed</code> - is called when a scene is failed to load. This method could be useful if you’re using non-verified scenes (i.e. from game mods) and want to react somehow when the scene is failed to load.</li>
</ol>
</div>
<div id="create-scene-manually" class="section level4 hasAnchor" number="5.0.1.2">
<h4><span class="header-section-number">5.0.1.2</span> Create scene manually<a href="scene-1.html#create-scene-manually" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A scene could also be created manually:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/mod.rs:create_scene}}</code></pre>
<p>See respective node builders <a href="../scene/graph.md#using-node-builders">docs</a> to populate the scene.</p>
</div>
</div>
<div id="where-all-my-scenes-located" class="section level3 hasAnchor" number="5.0.2">
<h3><span class="header-section-number">5.0.2</span> Where all my scenes located?<a href="scene-1.html#where-all-my-scenes-located" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All scenes “lives” in the engine, the engine has ownership over your scene after you’ve added it in the engine. You can borrow a scene at any time using its handle and do some changes:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/mod.rs:scene_borrowing}}</code></pre>
</div>
<div id="building-scene-asynchronously" class="section level3 hasAnchor" number="5.0.3">
<h3><span class="header-section-number">5.0.3</span> Building scene asynchronously<a href="scene-1.html#building-scene-asynchronously" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can create your scene in separate thread and then pass it to main thread to insert it in the engine. Why this is needed? Remember the last time you’ve played a relatively large game, you’ve probably noticed that it have loading screens and loading screen has some fancy interactive stuff with progress bar. Loading screen is fully responsive while the game doing hard job loading the world for you. Got it already? Asynchronous scene loading is needed to create/load large scenes with tons of resources without blocking main thread, thus leaving the game fully responsive.</p>
</div>
<div id="managing-multiple-scenes" class="section level3 hasAnchor" number="5.0.4">
<h3><span class="header-section-number">5.0.4</span> Managing multiple scenes<a href="scene-1.html#managing-multiple-scenes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Usually you should have only one scene active (unless you’re making something very special), you should use <code>.enabled</code> flag of a scene to turn it off or on. Deactivated scenes won’t be rendered, the physics won’t be updated, the sound will stop, and so on. In other words the scene will be frozen. This is useful for situations when you often need to switch between scenes, leaving other scene in frozen state. One of the examples where this can be useful is menus. In most games when you’re entering the menu, game world is paused.</p>
</div>
<div id="ambient-lighting" class="section level3 hasAnchor" number="5.0.5">
<h3><span class="header-section-number">5.0.5</span> Ambient lighting<a href="scene-1.html#ambient-lighting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Every scene has default ambient lighting, it is defined by a single RGB color. By default, every scene has some pre-defined ambient lighting, it is bright enough, so you can see your objects. In some cases you may need to adjust it or even make it black (for horror games for instance), this can be achieved by a single line of code:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/mod.rs:set_ambient_lighting}}</code></pre>
<p>Please keep in mind that ambient lighting does not mean global illumination, it is a different lighting technique which is not available in the engine yet.</p>
</div>
<div id="graph" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Graph<a href="scene-1.html#graph" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Graph is a set of objects with hierarchical relationships between each object. It is one of the most important entities in the engine. Graph takes care of your scene objects and does all the hard work for you.</p>
<div id="how-to-create-1" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> How to create<a href="scene-1.html#how-to-create-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You don’t need to create a graph manually, every scene has its own instance of the graph. It can be accessed pretty easily: <code>scene_ref.graph</code></p>
</div>
<div id="adding-nodes" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Adding nodes<a href="scene-1.html#adding-nodes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are two ways of adding nodes to the graph, either using <em>node builders</em> or manually by calling <code>graph.add_node</code>.</p>
<div id="using-node-builders" class="section level4 hasAnchor" number="5.1.2.1">
<h4><span class="header-section-number">5.1.2.1</span> Using node builders<a href="scene-1.html#using-node-builders" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Every node in the engine has its respective builder which can be used to create an instance of the node. Using builders is a preferable way to create scene nodes. There are following node builders:</p>
<ol style="list-style-type: decimal">
<li><code>BaseBuilder</code> - creates an instance of base node. See <a href="./base_node.md">Base node</a> for more info.</li>
<li><code>PivotBuilder</code> - creates an instance of pivot node. See <a href="./base_node.md">Base node</a> for more info.</li>
<li><code>CameraBuilder</code> - creates an instance of camera node. See <a href="./camera_node.md">Camera node</a> for more info.</li>
<li><code>MeshBuilder</code> - creates an instance of mesh node. See <a href="./mesh_node.md">Mesh node</a> for more info.</li>
<li><code>LightBuilder</code> - creates an instance of light node. See <a href="./light_node.md">Light node</a> for more info.</li>
<li><code>SpriteBuilder</code> - creates an instance of sprite node. See <a href="./sprite_node.md">Sprite node</a> for more info.</li>
<li><code>ParticleSystemBuilder</code> - creates an instance of particle system node. See <a href="./particle_system_node.md">Particle system node</a> for more info.</li>
<li><code>TerrainBuilder</code> - creates an instance of terrain node. See <a href="./terrain_node.md">Terrain node</a> for more info.</li>
<li><code>DecalBuilder</code> - creates an instance of decal node. See <a href="./decal_node.md">Decal node</a> for more info.</li>
<li><code>RigidBody</code> - creates an instance of rigid body node. See <a href="../physics/rigid_body.md">Rigid body</a> for more info.</li>
<li><code>Collider</code> - creates an instance of collider node. See <a href="../physics/collider.md">Collider</a> for more info.</li>
<li><code>Joint</code> - creates an instance of joint node. See <a href="../physics/joint.md">Joint</a> for more info.</li>
<li><code>Rectangle</code> - creates an instance of 2D rectangle node. See <a href="./rectangle.md">Rectangle</a> for more info.</li>
</ol>
<p>Every builder, other than <code>BaseBuilder</code>, accepts <code>BaseBuilder</code> as a parameter in <code>.new(..)</code> method. Why so? Because every node (other than Base) is “derived” from Base via composition and the derived builder must know how to build Base node. While it may sound confusing, it is actually very useful and clear. Consider this example:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/graph.rs:create_camera}}</code></pre>
<p>As you can see, we’re creating an instance of BaseBuilder and fill it with desired properties as well as filling the CameraBuilder’s instance properties. This is a very flexible mechanism, allowing you to build complex hierarchies in a declarative manner:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/graph.rs:create_node}}</code></pre>
<p>This code snippet creates a camera for first-person role-playing game’s player, it will have a staff in “right-hand” and a spell in the left hand. Of course all of this is very simplified, but should give you the main idea. Note that staff and fireball will be children nodes of camera, and when setting their transform, we’re actually setting <strong>local</strong> transform which means that the transform will be relative to camera’s. The staff and the spell will move together with the camera.</p>
</div>
<div id="adding-a-node-manually" class="section level4 hasAnchor" number="5.1.2.2">
<h4><span class="header-section-number">5.1.2.2</span> Adding a node manually<a href="scene-1.html#adding-a-node-manually" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For some rare cases you may also want to delay adding a node to the graph, specifically for that purpose, every node builder has <code>.build_node</code> method which creates an instance of <code>Node</code> but does not add it to the graph.</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/graph.rs:create_node_manually}}</code></pre>
</div>
</div>
<div id="how-to-modify-the-hierarchy" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> How to modify the hierarchy<a href="scene-1.html#how-to-modify-the-hierarchy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For many cases you can’t use builders to create complex hierarchy, the simplest example of such situation when you’re creating an instance of some 3D model. If you want the instance to be a child object of some other object, you should attach it explicitly by using <code>graph.link_nodes(..)</code>:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/graph.rs:link_weapon_to_camera}}</code></pre>
<p>Here we’ve loaded a weapon 3D model, instantiated it on scene and attached to <em>existing</em> camera.</p>
</div>
<div id="how-to-remove-nodes" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> How to remove nodes<a href="scene-1.html#how-to-remove-nodes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A node could be removed by simply calling <code>graph.remove_node(handle)</code>, this method removes the node from the graph <strong>with all of its children nodes</strong>. Sometimes this is unwanted behavior, and you want to preserve children nodes while deleting parent node. To do that, you need to explicitly detach children nodes of the node you’re about to delete:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/graph.rs:remove_preserve_children}}</code></pre>
<p>After calling this function, every child node of <code>node_to_remove</code> will be detached from it and the <code>node_to_remove</code> will be deleted. <code>remove_node</code> has some limitations: it cannot be used to extract “sub-graph” from the graph, it just drops nodes immediately.</p>
</div>
</div>
<div id="transformation" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Transformation<a href="scene-1.html#transformation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Transformation (transform for short) - is a special entity that changes coordinate system from one to another. It is used primarily in scene nodes to store their position/rotation/scale/pivots/etc. Fyrox has quite complex transformations, that supports:</p>
<ol style="list-style-type: decimal">
<li>Position (<code>T</code>)</li>
<li>Rotation (<code>R</code>)</li>
<li>Scale (<code>S</code>)</li>
<li>Pre-rotation (<code>Rpre</code>)</li>
<li>Post-rotation (<code>Rpost</code>)</li>
<li>Rotation Pivot (<code>Rp</code>)</li>
<li>Rotation Offset (<code>Roff</code>)</li>
<li>Scaling Offset (<code>Soff</code>)</li>
<li>Scaling Pivot (<code>Sp</code>)</li>
</ol>
<p>Final transformation matrix will be <code>Transform = T * Roff * Rp * Rpre * R * Rpost * Rp⁻¹ * Soff * Sp * S * Sp⁻¹</code>. In 99.9% cases first three are enough for pretty much every task. Other six components used for specific stuff (mainly for nodes that imported from FBX file format).</p>
</div>
<div id="prefabs" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Prefabs<a href="scene-1.html#prefabs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A prefab is a separate scene that can be instantiated in some other scene, while preserving links between properties of its instances and of its parent prefab. Prefabs allow you to create a part of a scene and have multiple instances of it in other scenes.</p>
<p>Let’s quickly check what that means on practice. The engine has a prefab system which allows you to build hierarchical scenes which can include any number of other scenes as child scenes. Child scenes can have their own child scenes and so on. This is very efficient decoupling mechanism that allows you to put pieces of the scene in separate scenes (prefabs) and modify them independently. The changes in child scenes will be automatically reflected to all parent scenes. Here is the very simple example of why this is important: imagine you need to populate a town with 3D models of cars. Each kind of car has its own 3D model and for example, a collision body that won’t allow the player to walk through cars. How would you do this? The simplest (and dumbest) solution is to copy dozens of car models in the scene, and you’re done. Imagine that now you need to change something in your car, for example, add a trunk that can be opened. What will you do? Of course, you should “iterate” over each car model and do the required changes, you simply don’t have any other option. This will eat huge amount of time and in general it is very non-productive.</p>
<p>This is where prefabs will save you hours of work. All you need to do is to create a car prefab and instantiate it multiple times in your scene. When you’ll need to change something in the car, you simply go to the prefab and change it. After that every prefab instance will have your changes!</p>
<p>Prefabs can be used to create self-contained entities in your game, examples of this includes: visual effects, any scripted game entities (bots, turrets, player, doors, etc.). Such prefabs can be either directly instantiated in a scene in the editor, or instantiated at runtime when needed.</p>
<div id="how-to-create-and-use-a-prefab" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> How to create and use a prefab<a href="scene-1.html#how-to-create-and-use-a-prefab" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All you need to do is to make a scene in the editor with all required objects and save it! After that, you can use the scene in other scenes and just do its instantiation, as in usual 3D models. You can either instantiate it from the editor by drag’n’drop a prefab to scene previewer, or do standard <a href="../resources/model.md#instantiation">model resource instantiation</a></p>
</div>
<div id="property-inheritance" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Property inheritance<a href="scene-1.html#property-inheritance" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As already mentioned in the intro section, instances inherit properties from their parent prefabs. For example, you can change position of an object in prefab and every instance will reflect that change - the object’s instances will also move. This works until there’s no manual change to a property in instance, if you do so, your change is considered with higher priority. See <a href="./inheritance.md">this chapter</a> for more info.</p>
</div>
<div id="hierarchical-prefabs" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Hierarchical Prefabs<a href="scene-1.html#hierarchical-prefabs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Prefabs can have other prefab instances inside it. This means that you can, for example, create a room populated with instances of other prefabs (bookshelves, chairs, tables, etc.) and then use the room prefab to build a bigger scene. The changes in the base prefabs will be reflected in their instances, regardless of how deep the hierarchy is.</p>
</div>
</div>
<div id="property-inheritance-1" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Property Inheritance<a href="scene-1.html#property-inheritance-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Property inheritance is used to propagate changes of unmodified properties from a prefab to its instances. For example, you can change scale of a node in a prefab and its instances will have the same scale too, unless the scale is set explicitly in an instance. Such feature allows you to tweak instances, add some unique details to them, but take general properties from parent prefabs.</p>
<p>Property inheritance works for prefab hierarchies of any depth, this means that you can create something like this: a room prefab can have multiple instances of various furniture prefabs in it, while the furniture prefabs can also be constructed from other prefabs and so on. In this case if you modify a property in one of the prefabs in the chain, all instance will immediately sync their unmodified properties.</p>
<div id="how-to-create-inheritable-properties" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> How To Create Inheritable Properties<a href="scene-1.html#how-to-create-inheritable-properties" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It is possible to use property inheritance for script variables. To make a property of your script inheritable, all you need is to wrap its value using <code>InheritableVariable</code> wrapper.</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/inheritance.rs:my_script}}</code></pre>
<p>The engine will automatically resolve the correct value for the property when a scene with the script is loaded. If your property was modified, then its value will remain the same, it won’t be overwritten by parent’s value. Keep in mind, that the type of the inheritable variable must be cloneable and support reflection.</p>
<p><code>InheritableVariable</code> implements the <code>Deref&lt;Target = T&gt; + DerefMut</code> traits, this means that any access via the <code>DerefMut</code> trait will mark the property as modified. This could be undesired in some cases so <code>InheritableVariable</code> supports special <code>xxx_silent</code> methods that don’t touch the internal modifiers and allows you to substitute the value with some other “silently” - without marking the variable as modified.</p>
</div>
<div id="which-fields-should-be-inheritable" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Which Fields Should Be Inheritable?<a href="scene-1.html#which-fields-should-be-inheritable" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Inheritable variables intended to be “atomic” - it means that the variable stores some simple variable (<code>f32</code>, <code>String</code>, <code>Handle&lt;Node&gt;</code>, etc.). While it is possible to store “compound” variables (<code>InheritableVariable&lt;YourStruct&gt;</code>), it is not advised because of inheritance mechanism. When the engine sees inheritable variable, it searches the same variable in a parent entity and copies its value to the child, thus completely replacing its content. In this case, even if you have inheritable variables inside compound field, they won’t be inherited correctly. Let’s demonstrate this in the following code snippet:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/inheritance.rs:complex_inheritance}}</code></pre>
<p>This code snippet should clarify, that inheritable fields should contain some “simple” data, and almost never - complex structs.</p>
</div>
<div id="editor" class="section level3 hasAnchor" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Editor<a href="scene-1.html#editor" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The editor wraps all inheritable properties in a special widget that supports property reversion. Reversion allows you to drop current changes and take the parent’s property value. This is useful if you want a property to inherit its parent’s value. In the Inspector it looks like this:</p>
<div class="float">
<img src="images/scene_revert.png" alt="revert" />
<div class="figcaption">revert</div>
</div>
<p>Clicking on the <code>&lt;</code> button will take the value from the parent prefab and the property won’t be marked as modified anymore. In case there is no parent prefab, the button will just drop <code>modified</code> flag.</p>
</div>
</div>
<div id="base-node" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Base node<a href="scene-1.html#base-node" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Base node is a scene node that stores hierarchical information (a handle to the parent node and a set of handles to children nodes), local and global transform, name, tag, lifetime, etc. It has self-describing name - it is used as a base node for every other scene node (via composition).</p>
<p>It has no graphical information, so it is invisible all the time, but it is useful as a “container” for children nodes.</p>
<div id="how-to-create-2" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> How to create<a href="scene-1.html#how-to-create-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <code>PivotBuilder</code> to create an instance of the Pivot node (remember <code>Base</code> node itself is used only to build other node types):</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/base.rs:build_node}}</code></pre>
</div>
<div id="building-a-complex-hierarchy" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Building a complex hierarchy<a href="scene-1.html#building-a-complex-hierarchy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To build a complex hierarchy of some nodes, use <code>.with_children()</code> method of the <code>BaseBuilder</code>, it allows you to build a hierarchy of any complexity:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/base.rs:build_complex_node}}</code></pre>
<p>Note that when we’re building a <code>Camera</code> instance, we’re passing a new instance of <code>BaseBuilder</code> to it, this instance can also be used to set some properties and a set of children nodes.</p>
<p>The “fluent syntax” is not mandatory to use, the above code snipped could be rewritten like this:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/base.rs:build_complex_node_flat}}</code></pre>
<p>However, it looks less informative, because it loses the hierarchical view and it is harder to tell the relations between objects.</p>
</div>
<div id="transform" class="section level3 hasAnchor" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> Transform<a href="scene-1.html#transform" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Base node has a local transform that allows you to translate/scale/rotate/etc. your node as you want to. For example, to move a node at specific location you could use this:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/base.rs:translate_node}}</code></pre>
<p>You could also chain multiple <code>set_x</code> calls, like so:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/base.rs:transform_node}}</code></pre>
<p>See more info about transformations <a href="./transform.md">here</a>.</p>
</div>
<div id="visibility" class="section level3 hasAnchor" number="5.5.4">
<h3><span class="header-section-number">5.5.4</span> Visibility<a href="scene-1.html#visibility" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>Base</code> node stores all info about local visibility and global visibility (with parent’s chain visibility included). Changing node’s visibility could be useful if you want to improve performance by hiding distant objects (however it strongly advised to use level-of-detail for this) or to hide some objects in your scene. There are three main methods to set or fetch visibility:</p>
<ul>
<li><code>set_visibility</code> - sets local visibility for a node.</li>
<li><code>visibility</code> - returns current local visibility of a node.</li>
<li><code>global_visibility</code> - returns combined visibility of a node. It includes visibility of every parent node in the hierarchy, so if you have a parent node with some children nodes and set parent’s visibility to <code>false</code>, global visibility of children nodes will be <code>false</code> too, even if local visibility is <code>true</code>. This is useful technique for hiding complex objects with lots of children nodes.</li>
</ul>
</div>
<div id="enablingdisabling-scene-nodes" class="section level3 hasAnchor" number="5.5.5">
<h3><span class="header-section-number">5.5.5</span> Enabling/disabling scene nodes<a href="scene-1.html#enablingdisabling-scene-nodes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A scene node could be enabled or disabled. Disabled nodes are excluded from a game loop and has almost zero CPU consumption (their global transform/visibility/enabled state is still updated due to limitations of the engine). Disabling a node could be useful if you need to completely freeze some hierarchy and do keep it in this state until it is enabled again. It could be useful to disable parts of a scene with which a player cannot interact to improve performance. Keep in mind, that enabled state is hierarchical like visibility. When you’re disabling a parent node with some children nodes, the children nodes will be disabled too.</p>
</div>
</div>
<div id="mesh-node" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Mesh node<a href="scene-1.html#mesh-node" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Mesh is a scene node that represents a 3D model. This one of the most commonly used nodes in almost every game. Meshes could be easily created either programmatically or be made in some 3D modelling software (like Blender) and loaded in your scene.</p>
<div id="surfaces" class="section level3 hasAnchor" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Surfaces<a href="scene-1.html#surfaces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Surface is a set of triangles that uses the same <a href="../rendering/materials.md">material</a>. Mesh node could contain zero of more surfaces; each surface contains a set of vertices and indices that binds vertices with triangles. Mesh nodes split into surfaces to be rendered effectively by modern GPUs.</p>
</div>
<div id="how-to-create-3" class="section level3 hasAnchor" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> How to create<a href="scene-1.html#how-to-create-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are basically two ways, how to pick one depends on your needs. In general, using a 3D modelling software is the way to go, especially with tons and tons of free 3D models available online.</p>
<blockquote>
<p>⚠️ The engine supports <em>only</em> FBX and GLTF file format for 3D models! To use GLTF, specify <code>gltf</code> feature of the engine in your root Cargo.toml</p>
</blockquote>
<div id="using-a-3d-modelling-software" class="section level4 hasAnchor" number="5.6.2.1">
<h4><span class="header-section-number">5.6.2.1</span> Using a 3D modelling software<a href="scene-1.html#using-a-3d-modelling-software" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To create a 3D model, you could use <a href="https://www.blender.org/">Blender</a> and then export it to <code>FBX</code> file format. To load your 3D model in the game, you should do few simple steps (loading a 3D model does not differ from a prefab instantiation):</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/mesh.rs:load_model_to_scene}}</code></pre>
<p>This code snippet intentionally omits proper <code>async/await</code> usage (instead it just blocks current thread until model is loading) and error handling. In the real game you should carefully handle all errors and use <code>async/await</code> properly.</p>
</div>
<div id="creating-a-procedural-mesh" class="section level4 hasAnchor" number="5.6.2.2">
<h4><span class="header-section-number">5.6.2.2</span> Creating a procedural mesh<a href="scene-1.html#creating-a-procedural-mesh" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A mesh instance could be created from code, such meshes are called “procedural”. They’re suitable for cases when you cannot create a mesh in 3D modelling software.</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/mesh.rs:create_procedural_mesh}}</code></pre>
<p>As you can see, creating a mesh procedurally requires lots of manual work and not so easy.</p>
</div>
</div>
<div id="animation-1" class="section level3 hasAnchor" number="5.6.3">
<h3><span class="header-section-number">5.6.3</span> Animation<a href="scene-1.html#animation-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Mesh node supports bone-based animation (skinning) and blend shapes. See <a href="./../animation/animation.md">Animation chapter</a> for more info.</p>
</div>
<div id="data-buffers" class="section level3 hasAnchor" number="5.6.4">
<h3><span class="header-section-number">5.6.4</span> Data Buffers<a href="scene-1.html#data-buffers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It is possible to access vertex buffer and index buffer of a mesh to either read or write some data there. For example, the following code extracts world-space positions of every vertex of an animated mesh:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/mesh.rs:extract_world_space_vertices}}</code></pre>
</div>
</div>
<div id="light-node" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Light node<a href="scene-1.html#light-node" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The engine offers complex lighting system with various types of light sources.</p>
<div id="light-types" class="section level3 hasAnchor" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> Light types<a href="scene-1.html#light-types" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are three main types of light sources: directional, point, and spotlights.</p>
<div id="directional-light" class="section level4 hasAnchor" number="5.7.1.1">
<h4><span class="header-section-number">5.7.1.1</span> Directional light<a href="scene-1.html#directional-light" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Directional light does not have a position, its rays are always parallel, and it has a particular direction in space. An example of directional light in real-life could be our Sun. Even if it is a point light, it is so far away from the Earth, so we can assume that its rays are always parallel. Directional light sources are suitable for outdoor scenes.</p>
<p>A directional light source could be created like this:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/light.rs:create_directional_light}}</code></pre>
<p>By default, the light source will be oriented to lit “the ground”. In other words its direction will be faced towards <code>(0.0, -1.0, 0.0)</code> vector. You can rotate it as you want by setting local transform of it while building. Something like this:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/light.rs:create_oriented_directional_light}}</code></pre>
</div>
<div id="point-light" class="section level4 hasAnchor" number="5.7.1.2">
<h4><span class="header-section-number">5.7.1.2</span> Point light<a href="scene-1.html#point-light" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Point light is a light source that emits lights in all directions, it has a position, but does not have an orientation. An example of a point light source: light bulb.</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/light.rs:create_point_light}}</code></pre>
</div>
<div id="spotlight" class="section level4 hasAnchor" number="5.7.1.3">
<h4><span class="header-section-number">5.7.1.3</span> Spotlight<a href="scene-1.html#spotlight" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Spotlight is a light source that emits lights in cone shape, it has a position and orientation. An example of a spotlight source: flashlight.</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/light.rs:create_spot_light}}</code></pre>
</div>
</div>
<div id="light-scattering" class="section level3 hasAnchor" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> Light scattering<a href="scene-1.html#light-scattering" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="float">
<img src="images/scene_scattering.png" alt="scattering" />
<div class="figcaption">scattering</div>
</div>
<p>Spot and point lights support light scattering effect. Imagine you’re walking with a flashlight in a foggy weather, the fog will scatter the light from your flashlight making it, so you’ll see the “light volume”. Light scattering is <strong>enabled by default</strong>, so you don’t have to do anything to enable it. However, in some cases you might want to disable it, you can do this either while building a light source or change light scattering options on existing light source. Here is the small example of how to do that.</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/light.rs:disable_light_scatter}}</code></pre>
<p>You could also change the amount of scattering per each color channel, using this you could imitate the <a href="https://en.wikipedia.org/wiki/Rayleigh_scattering">Rayleigh scattering</a>:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/light.rs:use_rayleigh_scattering}}</code></pre>
</div>
<div id="shadows" class="section level3 hasAnchor" number="5.7.3">
<h3><span class="header-section-number">5.7.3</span> Shadows<a href="scene-1.html#shadows" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>By default, light sources cast shadows. You can change this by using <code>set_cast_shadows</code> method of a light source. You should carefully manage shadows: shadows giving the most significant performance impact, you should keep the amount of light sources that can cast shadows at lowest possible amount to keep performance at good levels. You can also turn on/off shadows when you need:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/light.rs:switch_shadows}}</code></pre>
<p>Not every light should cast shadows, for example a small light that a player can see only in a distance can have shadows disabled. You should set the appropriate values depending on your scene, just remember: the fewer the shadows the better the performance. The most expensive shadows are from point lights, the less, from spotlights and directional lights.</p>
</div>
<div id="performance-2" class="section level3 hasAnchor" number="5.7.4">
<h3><span class="header-section-number">5.7.4</span> Performance<a href="scene-1.html#performance-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Lights are not cheap, every light source has some performance impact. As a general rule, try to keep the amount of light sources at reasonable levels and especially try to avoid creating tons of light sources in a small area. Keep in mind that the less area the light needs to “cover”, the higher the performance. This means that you can have tons of small light sources for free.</p>
</div>
</div>
<div id="sprite" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Sprite<a href="scene-1.html#sprite" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sprite is just a quad mesh that is always facing camera. It has size, color, rotation around “look” axis and a texture. Sprites are useful mostly for projectiles, like glowing plasma, and for things that should always face a camera.</p>
<blockquote>
<p>⚠️ It should be noted that <strong>sprites are not meant to be used for 2D games</strong>, they’re only for 3D. Use <a href="./rectangle.md">Rectangle node</a> if you need 2D sprites.</p>
</blockquote>
<div id="how-to-create-4" class="section level3 hasAnchor" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> How to create<a href="scene-1.html#how-to-create-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A sprite instance could be created using <code>SpriteBuilder</code>:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/sprite.rs:create_sprite}}</code></pre>
<p>A sprite with a texture could be created by using <code>.with_material</code> method of the builder:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/sprite.rs:create_sprite_with_texture}}</code></pre>
<p>Please note, that this code create a material per each sprite. This could be very unoptimal if you’re using tons of sprites at once, share the same material resource across multiple sprites if you can. Otherwise, each sprite will be rendered in a separate draw call and the overall performance will be very low.</p>
</div>
<div id="animation-2" class="section level3 hasAnchor" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> Animation<a href="scene-1.html#animation-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See <a href="../animation/spritesheet/spritesheet.md">Sprite Animation</a> chapter for more info.</p>
</div>
<div id="general-rules" class="section level3 hasAnchor" number="5.8.3">
<h3><span class="header-section-number">5.8.3</span> General rules<a href="scene-1.html#general-rules" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sprites <strong>must not</strong> be used to create any visual effects that involve many particles. You should use <a href="particle_system_node.md">particle systems</a> for that. Why so? Particles systems are very well optimized for managing huge amounts of particles at the same time, but sprites are not. Each sprite is quite heavy to be used as a particle in particle systems, it has a lot of “useless” info that will eat a lot of memory.</p>
</div>
</div>
<div id="particle-system" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> Particle system<a href="scene-1.html#particle-system" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Particle system is a scene node that is used to create complex visual effects (VFX). It operates on huge amount of particles at once allowing you to do complex simulation that involves large amount of particles. Typically, particle systems are used to create following visual effects: smoke, sparks, blood splatters, steam, etc.</p>
<div class="float">
<img src="images/scene_particle_system_example.png" alt="smoke" />
<div class="figcaption">smoke</div>
</div>
<div id="basic-concepts-1" class="section level3 hasAnchor" number="5.9.1">
<h3><span class="header-section-number">5.9.1</span> Basic Concepts<a href="scene-1.html#basic-concepts-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Particle system uses <em>single</em> texture for every particle in the system, only Red channel is used. Red channel interpreted as an alpha for all particles.</p>
<p>Every particle is affected by <code>Acceleration</code> parameters of the particle system. It defines acceleration (in m/s<sup>2</sup>) that will affect velocities of every particle. It is used to simulate gravity.</p>
<div id="particle" class="section level4 hasAnchor" number="5.9.1.1">
<h4><span class="header-section-number">5.9.1.1</span> Particle<a href="scene-1.html#particle" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Particle is a square (not quadrilateral, this is important) with a texture which is always facing towards camera. It has the following properties:</p>
<ul>
<li><code>Position</code> - defines a position in <em>local</em> coordinates of particle system (this means that if you rotate a particle system, all particles will be rotated too).</li>
<li><code>Velocity</code> - defines a speed vector (in local coordinates) that will be used to modify local position of the particle each frame.</li>
<li><code>Size</code> - size (in meters) of the square shape of the particle.</li>
<li><code>Size Modifier</code> - a numeric value (in meters per second), that will be added to the Size at each frame, it is used to modify size of the particles.</li>
<li><code>Lifetime</code> - amount of time (in seconds) that the particle can be active for.</li>
<li><code>Rotation</code> - angle (in radians) that defines rotation around particle-to-camera axis (clockwise).</li>
<li><code>Rotation Speed</code> - speed (in radians per second, rad/s) of rotation of the particle.</li>
<li><code>Color</code> - RGBA color of the particle.</li>
</ul>
</div>
<div id="emitters" class="section level4 hasAnchor" number="5.9.1.2">
<h4><span class="header-section-number">5.9.1.2</span> Emitters<a href="scene-1.html#emitters" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Particle system uses <em>emitters</em> to define a set of zones where particles will be spawned, it also defines initial ranges of parameters of particles. Particle system must have at least one emitter to generate particles.</p>
<p>Emitter can be one of the following types:</p>
<ul>
<li><code>Cuboid</code> - emits particles uniformly in a cuboid shape, the shape cannot be rotated, only translated.</li>
<li><code>Sphere</code> - emits particles uniformly in a sphere shape.</li>
<li><code>Cylinder</code> - emits particle uniformly in a cylinder shape, the shape cannot be rotated, only translated.</li>
</ul>
<p>Each emitter have fixed set of parameters that affects <em>initial</em> values for every spawned particle:</p>
<ul>
<li><code>Position</code> - emitter have its own <em>local</em> position (position relative to parent particle system node), this helps you to create complex particle systems that may spawn particles from multiple zones in space at once.</li>
<li><code>Max Particles</code> - maximum amount of particles available for spawn. By default, it is <code>None</code>, which says that there is no limit.</li>
<li><code>Spawn Rate</code> - rate (in units per second) defines how fast the emitter will spawn particles.</li>
<li><code>Lifetime Range</code> - numeric range (in seconds) for particle lifetime values. The lower the beginning of the range the less spawned particles will live, and vice versa.</li>
<li><code>Size Range</code> - numeric range (in meters) for particle size.</li>
<li><code>Size Modifier Range</code> - numeric range (in meters per second, m/s) for particle size modifier parameter.</li>
<li><code>X/Y/Z Velocity Range</code> - a numeric range (in meters per second, m/s) for a respective velocity axis (X, Y, Z) that defines initial speed along the axis.</li>
<li><code>Rotation Range</code> - a numeric range (in radians) for initial rotation of a new particle.</li>
<li><code>Rotation Speed Range</code> - a numeric range (in radians per second, rad/s) for rotation speed of a new particle.</li>
</ul>
<p><strong>Important:</strong> Every range (like Lifetime Range, Size Range, etc.) parameter generates <em>random</em> value for respective parameter of a particle. You can tweak the seed of current random number generator (<code>fyrox::core::thread_rng()</code>) to ensure that generated values will be different each time.</p>
</div>
</div>
<div id="how-to-create-5" class="section level3 hasAnchor" number="5.9.2">
<h3><span class="header-section-number">5.9.2</span> How to create<a href="scene-1.html#how-to-create-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are multiple ways of creating a particle system, pick one that best suits your current needs.</p>
<div id="using-the-editor" class="section level4 hasAnchor" number="5.9.2.1">
<h4><span class="header-section-number">5.9.2.1</span> Using the editor<a href="scene-1.html#using-the-editor" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The best way to create a particle system is to configure it in the editor, creating from code is possible too (see below), but way harder and may be not intuitive, because of the large amount of parameters. The editor allows you see the result and tweak it very fast. Create a particle system by <code>Create -&gt; Particle System</code> and then you can start editing its properties. By default, new particle system has one Sphere particle emitter, you can add new emitters by clicking <code>+</code> button at the right of <code>Emitters</code> property in the Inspector (or remove by clicking <code>-</code>). Here’s a simple example:</p>
<div class="float">
<img src="images/scene_particle_system.png" alt="particle system" />
<div class="figcaption">particle system</div>
</div>
<p>Now start tweaking desired parameters, it is hard to give any recommendations of how to achieve a particular effect, only practice matters here.</p>
</div>
<div id="using-the-code" class="section level4 hasAnchor" number="5.9.2.2">
<h4><span class="header-section-number">5.9.2.2</span> Using the code<a href="scene-1.html#using-the-code" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You can also create particle systems from code (in case if you need some procedurally-generated effects):</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/particle_system.rs:create_smoke}}</code></pre>
<p>This code creates smoke effect with smooth dissolving (by using color-over-lifetime gradient). Please refer to <a href="https://docs.rs/fyrox/latest/fyrox/scene/particle_system/index.html">API docs</a> for particle system for more information.</p>
</div>
<div id="using-prefabs" class="section level4 hasAnchor" number="5.9.2.3">
<h4><span class="header-section-number">5.9.2.3</span> Using prefabs<a href="scene-1.html#using-prefabs" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If you need to create particle systems made in the editor, you can always use prefabs. Create a scene with desired particle system and then <a href="../resources/model.md#instantiation">instantiate</a> it to your scene.</p>
</div>
</div>
<div id="soft-particles" class="section level3 hasAnchor" number="5.9.3">
<h3><span class="header-section-number">5.9.3</span> Soft particles<a href="scene-1.html#soft-particles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Fyrox used special technique, called soft particles, that smooths sharp transitions between particles and scene geometry:</p>
<div class="float">
<img src="images/scene_soft_particles.png" alt="soft particles" />
<div class="figcaption">soft particles</div>
</div>
<p>This technique especially useful for effects such as smoke, fog, etc. where you don’t want to see the “edge” between particles and scene geometry. You can tweak this effect using <code>Soft Boundary Sharpness Factor</code>, the larger the value the more “sharp” the edge will be and vice versa.</p>
</div>
<div id="restarting-emission" class="section level3 hasAnchor" number="5.9.4">
<h3><span class="header-section-number">5.9.4</span> Restarting emission<a href="scene-1.html#restarting-emission" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can “rewind” particle systems in the “initial” state by calling <code>particle_system.clear_particles()</code> method, it will remove all generated particles and emission will start over.</p>
</div>
<div id="enabling-or-disabling-particle-systems" class="section level3 hasAnchor" number="5.9.5">
<h3><span class="header-section-number">5.9.5</span> Enabling or disabling particle systems<a href="scene-1.html#enabling-or-disabling-particle-systems" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>By default, every particle system is enabled. Sometimes there is a need to create a particle system, but not enable it (for example for some delayed effect). You can achieve this by calling <code>particle_system.set_enabled(true/false)</code> method. Disabled particle systems will still be drawn, but emission and animation will be stopped. To hide particle system completely, use <code>particle_system.set_visibility(false)</code> method.</p>
</div>
<div id="performance-3" class="section level3 hasAnchor" number="5.9.6">
<h3><span class="header-section-number">5.9.6</span> Performance<a href="scene-1.html#performance-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Particle systems using special renderer that optimized to draw millions of particles with very low overhead, however particles simulated on CPU side and may significantly impact overall performance when there are many particle systems with lots of particles in each.</p>
</div>
<div id="limitations" class="section level3 hasAnchor" number="5.9.7">
<h3><span class="header-section-number">5.9.7</span> Limitations<a href="scene-1.html#limitations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Particle systems does not interact with lighting, this means that particles will not be lit by light sources in the scene.</p>
</div>
</div>
<div id="terrain" class="section level2 hasAnchor" number="5.10">
<h2><span class="header-section-number">5.10</span> Terrain<a href="scene-1.html#terrain" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Terrain is a scene node that represents uniform grid of cells where each cell can have different height. Other, commonly known name for terrain is heightmap. Terrains used to create maps for open-world games, it is used to create hills, mountains, plateau, roads, etc.</p>
<div class="float">
<img src="images/scene_terrain.png" alt="terrain" />
<div class="figcaption">terrain</div>
</div>
<div id="basic-concepts-2" class="section level3 hasAnchor" number="5.10.1">
<h3><span class="header-section-number">5.10.1</span> Basic concepts<a href="scene-1.html#basic-concepts-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are few basic concepts that you should understand before trying to use terrains. This will help you to understand design decisions and potential use cases.</p>
<div id="heightmap" class="section level4 hasAnchor" number="5.10.1.1">
<h4><span class="header-section-number">5.10.1.1</span> Heightmap<a href="scene-1.html#heightmap" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As it was already mentioned, terrain is a uniform grid where X and Z coordinates of cells have fixed values, while Y can change. In this case we can store only width, height and resolution numerical parameters to calculate X and Z coordinates, while Y is stored in a separate array which is then used to modify heights of cells. Such array is called <em>heightmap</em>.</p>
<div class="float">
<img src="images/scene_terrain_mesh.png" alt="terrain mesh" />
<div class="figcaption">terrain mesh</div>
</div>
</div>
<div id="layers" class="section level4 hasAnchor" number="5.10.1.2">
<h4><span class="header-section-number">5.10.1.2</span> Layers<a href="scene-1.html#layers" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Layer is a material + mask applied to terrain’s mesh. Mask is a separate, greyscale texture that defines in which parts of the terrain the material should be visible or not. White pixels in the mask makes the material to be visible, black - completely transparent, everything between helps you to create smooth transitions between layers. Here’s a simple example of multiple layers:</p>
<div class="float">
<img src="images/scene_terrain_layers_layout.png" alt="terrain layers layout" />
<div class="figcaption">terrain layers layout</div>
</div>
<p>There are 3 layers: 1 - dirt, 2 - grass, 3 - rocks and grass. As you can see, there are smooth transitions between each layer, it is achieved by layer’s mask.</p>
<p>Each layer uses separate material, which can be edited from respective property editor in the Inspector:</p>
<div class="float">
<img src="images/scene_terrain_layer_material.png" alt="terrain layer material" />
<div class="figcaption">terrain layer material</div>
</div>
</div>
</div>
<div id="creating-terrain-in-the-editor" class="section level3 hasAnchor" number="5.10.2">
<h3><span class="header-section-number">5.10.2</span> Creating terrain in the editor<a href="scene-1.html#creating-terrain-in-the-editor" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can create a terrain node by clicking <code>Create -&gt; Terrain</code>. It will create a terrain with fixed width, height, and resolution (see <a href="./terrain_node.md#limitations-and-known-issues">limitations</a>). Once the terrain is created, select it in the World Viewer and click on Hill icon on the toolbar. This will enable terrain editing, brush options panel should also appear. See the picture below with all the steps:</p>
<div class="float">
<img src="images/scene_terrain_editing.png" alt="terrain editing" />
<div class="figcaption">terrain editing</div>
</div>
<p>The green rectangle on the terrain under the cursor represents current brush. You can edit brush options in the <code>Brush Options</code> window:</p>
<div class="float">
<img src="images/scene_brush_options.png" alt="brush options" />
<div class="figcaption">brush options</div>
</div>
<p>You can select a shape (either circle or rectangle with configurable size) and a mode (either modify the height map, or draw on mask of specific layer).</p>
<p>When editing terrain’s height, left mouse button raises height map, but if <code>Shift</code> key is pressed it lowers it instead. Something similar is applied to the mask editing - left mouse button draws, but if hold <code>Shift</code> - it will erase mask content.</p>
</div>
<div id="creating-terrain-from-code" class="section level3 hasAnchor" number="5.10.3">
<h3><span class="header-section-number">5.10.3</span> Creating terrain from code<a href="scene-1.html#creating-terrain-from-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Terrain can always be created from code, here’s comprehensive example of how to create and modify terrain from code:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/terrain.rs:create_random_two_layer_terrain}}</code></pre>
<p>As you can see there is quite a lot of code, ideally you should use editor all the times, because handling everything from code could be very tedious. The result of its execution (if all textures are set correctly) could be something like this (keep in mind that terrain will be random every time you run the code):</p>
<div class="float">
<img src="images/scene_terrain_random.png" alt="terrain from code" />
<div class="figcaption">terrain from code</div>
</div>
</div>
<div id="physics-1" class="section level3 hasAnchor" number="5.10.4">
<h3><span class="header-section-number">5.10.4</span> Physics<a href="scene-1.html#physics-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>By default, terrains does not have respective physical body and shape, it should be added manually. Create a static rigid body node with a collider with Heightmap shape (<a href="../physics/collider.md">learn more about colliders</a>). Then attach the terrain to the rigid body. Keep in mind that terrain’s origin differs from Heightmap rigid body, so you need to offset the terrain to match its physical representation. Enable physics visualization in editor settings to see physical shapes and move terrain. Now to move the terrain you should move the body, instead of the terrain (because of parent-child <a href="../beginning/scene_and_scene_graph.md#local-and-global-coordinates">relations</a>).</p>
</div>
<div id="performance-4" class="section level3 hasAnchor" number="5.10.5">
<h3><span class="header-section-number">5.10.5</span> Performance<a href="scene-1.html#performance-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Terrain rendering complexity have linear dependency with the amount of layers terrain have. Each layer forces the engine to re-render terrain’s geometry with different textures and mask. Typical amount of layers is from 4 to 8. For example, a terrain could have the following layers: dirt, grass, rock, snow. This is a relatively lightweight scheme. In any case, you should measure frame time to understand how each new layer affects performance in your case.</p>
</div>
<div id="chunking" class="section level3 hasAnchor" number="5.10.6">
<h3><span class="header-section-number">5.10.6</span> Chunking<a href="scene-1.html#chunking" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Terrain itself does not define any geometry or rendering data, instead it uses one or more chunks for that purpose. Each chunk could be considered as a “sub-terrain”. You can “stack” any amount of chunks from any side of the terrain. To do that, you define a range of chunks along each axis. This is very useful if you need to extend your terrain in a particular direction. Imagine that you’ve created a terrain with just one chunk (<code>0..1</code> range on both axes), but suddenly you foundthat you need to extend the terrain to add some new game locations. In this case you can change the range of chunks at the desired axis. For instance, if you want to add a new location to the right from your single chunk, then you should change <code>width_chunks</code> range to <code>0..2</code> and leave <code>length_chunks</code> as is (<code>0..1</code>). This way terrain will be extended, and you can start shaping the new location.</p>
</div>
<div id="level-of-detail" class="section level3 hasAnchor" number="5.10.7">
<h3><span class="header-section-number">5.10.7</span> Level-of-detail<a href="scene-1.html#level-of-detail" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Terrain has automatic LOD system, which means that the closest portions of it will be rendered with the highest possible quality (defined by the resolution of height map and masks), while the furthest portions will be rendered with the lowest quality. This effectively balances GPU load and allows you to render huge terrains with low overhead.</p>
<p>The main parameter that affects LOD system is <code>block_size</code> (<code>Terrain::set_block_size</code>), which defines size of the patch that will be used for rendering. It is used to divide the size of the height map into a fixed set of blocks using quad-tree algorithm.</p>
<p>Current implementation uses modified version of CDLOD algorithm without patch morphing. Apparently it is not needed, since bilinear filtration in vertex shader prevents seams to occur.</p>
<p>Current implementation makes it possible to render huge terrains (64x64 km) with 4096x4096 heightmap resolution in about a millisecond on average low-to-middle-end GPU.</p>
</div>
<div id="limitations-and-known-issues" class="section level3 hasAnchor" number="5.10.8">
<h3><span class="header-section-number">5.10.8</span> Limitations and known issues<a href="scene-1.html#limitations-and-known-issues" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There is no way to cut holes in the terrain yet, it makes impossible to create caves. There is also no way to create ledges, use separate meshes to imitate this. See <a href="https://github.com/FyroxEngine/Fyrox/issues/351">tracking issue</a> for more info.</p>
</div>
</div>
<div id="camera-node" class="section level2 hasAnchor" number="5.11">
<h2><span class="header-section-number">5.11</span> Camera node<a href="scene-1.html#camera-node" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Camera is a special scene node that allows you to “look” at your scene from any point and with any orientation. Currently, the engine supports only <em>perspective</em> cameras, which could be represented as a frustum volume. Everything that “intersects” with the frustum will be rendered.</p>
<div class="float">
<img src="images/scene_frustum.svg" alt="Frustum" />
<div class="figcaption">Frustum</div>
</div>
<div id="how-to-create-6" class="section level3 hasAnchor" number="5.11.1">
<h3><span class="header-section-number">5.11.1</span> How to create<a href="scene-1.html#how-to-create-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>An instance of camera node could be created using <code>CameraBuilder</code>:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/camera.rs:create_camera}}</code></pre>
<p>Orientation and position should be set in <code>BaseBuilder</code> as usual.</p>
</div>
<div id="projection-modes" class="section level3 hasAnchor" number="5.11.2">
<h3><span class="header-section-number">5.11.2</span> Projection modes<a href="scene-1.html#projection-modes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Projection mode defines how your scene will look like after rendering, there are two projection modes available.</p>
<div id="perspective" class="section level4 hasAnchor" number="5.11.2.1">
<h4><span class="header-section-number">5.11.2.1</span> Perspective<a href="scene-1.html#perspective" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Perspective projection makes distant objects smaller and parallel lines converging when using it, it is the most common projection type for 3D games. By default, each camera uses perspective projection. It’s defined by three parameters that describes frustum volume:</p>
<ul>
<li>Field of view angle</li>
<li>Near clipping plane location</li>
<li>Far clipping plane location</li>
</ul>
<p>Here is a simple example of how to create a camera with perspective projection:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/camera.rs:create_perspective_camera}}</code></pre>
</div>
<div id="orthographic" class="section level4 hasAnchor" number="5.11.2.2">
<h4><span class="header-section-number">5.11.2.2</span> Orthographic<a href="scene-1.html#orthographic" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Orthographic projection prevents parallel lines from converging, it does not affect object size with distance. If you’re making 2D games or isometric 3D games, this is the projection mode you’re looking for. Orthographic projection defined by three parameters:</p>
<ul>
<li>Vertical Size</li>
<li>Near Clipping Plane</li>
<li>Far Clipping Plane</li>
</ul>
<p>Vertical size defines how large the “box” will be in vertical axis, horizontal size is derived from vertical size by multiplying vertical size with aspect ratio.</p>
<p>Here is a simple example of how to create a camera with orthographic projection:</p>
<pre class="rust,no_run"><code></code></pre>
</div>
</div>
<div id="performance-5" class="section level3 hasAnchor" number="5.11.3">
<h3><span class="header-section-number">5.11.3</span> Performance<a href="scene-1.html#performance-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Each camera forces engine to re-render scene one more time, which can be very resource-intensive (both CPU and GPU) operation.</p>
<p>To reduce GPU load, try to keep the Far Clipping Plane at lowest possible values. For example, if you’re making a game with closed environment (lots of corridors, small rooms, etc.) set the Far clipping Plane to max possible distance that can be “seen” in your game - if the largest thing is a corridor, then set the Far clipping Plane to slightly exceed the length. This will force the engine to clip everything that is out of bounds and do not draw such objects.</p>
</div>
<div id="skybox" class="section level3 hasAnchor" number="5.11.4">
<h3><span class="header-section-number">5.11.4</span> Skybox<a href="scene-1.html#skybox" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Outdoor scenes usually have distant objects that can’t be reached, these can be mountains, sky, distant forest, etc. such objects can be pre-rendered and then applied to a huge cube around camera, it will always be rendered first and will be the background of your scene. To create a Skybox and set it to a camera, you can use the following code:</p>
<pre class="rust,no_run,edition2018"><code>{{#include ../code/snippets/src/scene/camera.rs:create_camera_with_skybox}}</code></pre>
</div>
<div id="color-grading-look-up-tables" class="section level3 hasAnchor" number="5.11.5">
<h3><span class="header-section-number">5.11.5</span> Color grading look-up tables<a href="scene-1.html#color-grading-look-up-tables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Color grading Look-Up Tables (LUT) allows you to transform color space of your frame. Probably everyone saw the famous “mexican” movie effect when everything becomes yellow-ish when action takes place in Mexico, this is done via color grading LUT effect. When used wisely, it can significantly improve perception of your scene.</p>
<p>Here is the same scene having no color correction along with another case that has “mexico” color correction:</p>
<table>
<colgroup>
<col width="61%" />
<col width="38%" />
</colgroup>
<thead>
<tr class="header">
<th>Scene</th>
<th>Look-up-table</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><img src="images/scene_no_color_correction.PNG" alt="No Color Correction" /></td>
<td><img src="images/scene_lut_neutral.jpg" alt="Neutral LUT" /></td>
</tr>
<tr class="even">
<td><img src="images/scene_with_color_correction.PNG" alt="With Color Correction" /></td>
<td><img src="images/scene_lut_mexico.jpg" alt="Neutral LUT" /></td>
</tr>
</tbody>
</table>
<p>To use color grading LUT you could do something like this:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/camera.rs:create_camera_with_lut}}</code></pre>
</div>
<div id="picking" class="section level3 hasAnchor" number="5.11.6">
<h3><span class="header-section-number">5.11.6</span> Picking<a href="scene-1.html#picking" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In some games you may need to do mouse picking of objects in your scene. To do that, at first you need to somehow convert a point on the screen to ray in the world. <code>Camera</code> has <code>make_ray</code> method exactly for that purpose:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/camera.rs:make_picking_ray}}</code></pre>
<p>The ray then can be used to <a href="../physics/ray.md">perform a ray cast over physics entities</a>. This is the simplest way of camera picking, and you should prefer it most of the time.</p>
<div id="advanced-picking" class="section level4 hasAnchor" number="5.11.6.1">
<h4><span class="header-section-number">5.11.6.1</span> Advanced picking<a href="scene-1.html#advanced-picking" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Important</strong>: The following picking method is for advanced engine users only, if you don’t know the math you should not use it.</p>
<p>If you know the math and don’t want to create physical entities, you can use this ray to perform manual ray intersection check:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/camera.rs:precise_ray_test}}</code></pre>
<p><code>precise_ray_test</code> is what you need, it performs precise intersection check with geometry of a mesh node. It returns a tuple of the closest distance and the closest intersection point.</p>
</div>
</div>
</div>
<div id="exposure-and-hdr" class="section level2 hasAnchor" number="5.12">
<h2><span class="header-section-number">5.12</span> Exposure and HDR<a href="scene-1.html#exposure-and-hdr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>(WIP)</p>
</div>
<div id="decal-node" class="section level2 hasAnchor" number="5.13">
<h2><span class="header-section-number">5.13</span> Decal node<a href="scene-1.html#decal-node" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Decal nodes allow you to “project” a texture onto your scene within some specific bounds. It is widely used for bullet holes, blood splatter, dirt, cracks and so on. Here is the example of the decal applied to the scene:</p>
<div class="float">
<img src="images/scene_decal.PNG" alt="Decal" />
<div class="figcaption">Decal</div>
</div>
<p>The rust marks are applied on existing geometry of the scene by projecting a rust texture in specific direction.</p>
<div id="how-to-create-7" class="section level3 hasAnchor" number="5.13.1">
<h3><span class="header-section-number">5.13.1</span> How to create<a href="scene-1.html#how-to-create-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A decal instance can be created using DecalBuilder:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/decal.rs:create_decal}}</code></pre>
</div>
<div id="textures" class="section level3 hasAnchor" number="5.13.2">
<h3><span class="header-section-number">5.13.2</span> Textures<a href="scene-1.html#textures" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can specify which textures the decal will be projecting, currently there is only diffuse and normal maps supported.</p>
</div>
<div id="rendering-1" class="section level3 hasAnchor" number="5.13.3">
<h3><span class="header-section-number">5.13.3</span> Rendering<a href="scene-1.html#rendering-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Currently, the engine supports only <em>deferred decals</em>, which means that decals modify the information stored in G-Buffer. This fact means that decals will be lit correctly with other geometry in the scene. However, if you have some objects in your scene that uses forward rendering path, your decals won’t be applied to them.</p>
</div>
<div id="bounds" class="section level3 hasAnchor" number="5.13.4">
<h3><span class="header-section-number">5.13.4</span> Bounds<a href="scene-1.html#bounds" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Decal uses Object-Oriented Bounding Box (OOB) to determine pixels on which decal’s textures will be projected, everything that got into OOB will be covered. Exact bounds can be set by tweaking local transform of a decal. If you want your decal to be larger, set its scale to some large value. To position a decal - use local position, to rotate - local rotation.</p>
<p>A decal defines a cube that projects a texture on every pixel of a scene that got into the cube. Exact cube size is defined by decal’s local scale. For example, if you have a decal with scale of (1.0, 2.0, 0.1) then the size of the cube (in local coordinates) will be width = 1.0, height = 2.0 and depth = 0.1. The decal can be rotated as any other scene node. Its final size and orientation are defined by the chain of transformations of parent nodes.</p>
</div>
<div id="layers-1" class="section level3 hasAnchor" number="5.13.5">
<h3><span class="header-section-number">5.13.5</span> Layers<a href="scene-1.html#layers-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are situations when you want to prevent some geometry from being covered with a decal, to do that the engine offers a concept of layers. A decal will be applied to a geometry if and only if they have matching layer index. This allows you to create environment damage decals, and they won’t affect dynamic objects since they’re located on different layers.</p>
</div>
<div id="performance-6" class="section level3 hasAnchor" number="5.13.6">
<h3><span class="header-section-number">5.13.6</span> Performance<a href="scene-1.html#performance-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Current implementation of decals is relatively cheap, this allows you to create many decals on scene. However, you should keep the amount of decals at a reasonable level.</p>
</div>
</div>
<div id="rectangle-node" class="section level2 hasAnchor" number="5.14">
<h2><span class="header-section-number">5.14</span> Rectangle node<a href="scene-1.html#rectangle-node" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Rectangle is the simplest “2D” node, it can be used to create “2D” graphics. 2D is in quotes here because the node is actually a 3D node, like everything else in the engine. Here is an example scene made with the rectangle nodes and an orthographic camera:</p>
<div class="float">
<img src="images/scene_2d_scene.PNG" alt="2d scene" />
<div class="figcaption">2d scene</div>
</div>
<p>As you can see it is a good basis for 2D games.</p>
<div id="how-to-create-8" class="section level3 hasAnchor" number="5.14.1">
<h3><span class="header-section-number">5.14.1</span> How to create<a href="scene-1.html#how-to-create-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the RectangleBuilder to create Rectangle nodes:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/rectangle.rs:create_rect}}</code></pre>
</div>
<div id="specifying-image-portion-for-rendering" class="section level3 hasAnchor" number="5.14.2">
<h3><span class="header-section-number">5.14.2</span> Specifying image portion for rendering<a href="scene-1.html#specifying-image-portion-for-rendering" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>By default, Rectangle node uses entire image for rendering, but for some applications it is not enough. For example, you may want to use sprite sheets to animate your 2D entities. In this case you need to be able to use only portion of an image. It is possible to do by using <code>set_uv_rect</code> method of the Rectangle node. Here’s an example of setting right-top quarter of an image to be used by a Rectangle node:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/rectangle.rs:set_2nd_quarter_image_portion}}</code></pre>
<p>Keep in mind that every part of uv rectangle is proportional. For example 0.5 means 50%, 1.5 = 150% and so on. If width or height is exceeding 1.0 and the texture being used is set to Wrapping mode at respective axis, the image will tile across axes.</p>
</div>
<div id="animation-3" class="section level3 hasAnchor" number="5.14.3">
<h3><span class="header-section-number">5.14.3</span> Animation<a href="scene-1.html#animation-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See <a href="../animation/spritesheet/spritesheet.md">Sprite Animation</a> chapter for more info.</p>
</div>
<div id="performance-7" class="section level3 hasAnchor" number="5.14.4">
<h3><span class="header-section-number">5.14.4</span> Performance<a href="scene-1.html#performance-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Rectangles use specialized renderer that is heavily optimized to render tons of rectangles at once, so you can use rectangles almost for everything in 2D games.</p>
</div>
</div>
<div id="custom-scene-node" class="section level2 hasAnchor" number="5.15">
<h2><span class="header-section-number">5.15</span> Custom Scene Node<a href="scene-1.html#custom-scene-node" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes there is a need to have custom scene nodes, it is possible to do, but it requires quite a lot of boilerplate code.</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/custom.rs:custom_node}}</code></pre>
<p>Once the node is defined, you can create is as usual and put in the graph:</p>
<pre class="rust,no_run"><code>{{#include ../code/snippets/src/scene/custom.rs:add_custom_node}}</code></pre>
<div id="limitations-1" class="section level3 hasAnchor" number="5.15.1">
<h3><span class="header-section-number">5.15.1</span> Limitations<a href="scene-1.html#limitations-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Scene nodes have no access to outer context, this means that you cannot reference any data that is located outside graph easily. You still can define a global variable that <strong>will</strong> be accessible, but it is considered as a hack and should be avoided. If you want to add custom logic to scene nodes, then you should use scripts instead. Custom nodes are intended for very specific use cases, such as adding “data sources” for renderer, etc.</p>
</div>
<div id="editor-support" class="section level3 hasAnchor" number="5.15.2">
<h3><span class="header-section-number">5.15.2</span> Editor support<a href="scene-1.html#editor-support" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For now, you cannot create custom nodes from the editor. This will be available in future versions of the engine.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="scripting.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="physics-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/04-scene.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
